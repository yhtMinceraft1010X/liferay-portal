@component-name = "portal-liferay-online"
definition {

	property osgi.modules.includes = "site-initializer-team-extranet";
	property portal.release = "true";
	property portal.upstream = "true";
	property release.feature.flags.disable.DISABLE_PRIVATE_LAYOUTS = "true";
	property testray.main.component.name = "Team Extranet";

	var testSiteName = "Test Site Team Extranet Name";
	var testSiteURL = "test-site-team-extranet-name";

	setUp {
		task ("Set up instance and sign in") {
			TestCase.setUpPortalInstance();

			User.firstLoginPG();
		}

		task ("Create a new Team Extranet Site") {
			ApplicationsMenu.gotoPortlet(
				category = "Sites",
				panel = "Control Panel",
				portlet = "Sites");

			TeamExtranet.addSiteTemplateCP(
				siteName = "${testSiteName}",
				siteTemplateName = "Team Extranet");
		}
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			JSONGroup.deleteGroupByName(groupName = "${testSiteName}");
		}
	}

	@description = "This is a test for LPS-142641. Create a Site based on Team-Extranet"
	@priority = "5"
	test AddTeamExtranetSite {
		property portal.acceptance = "true";

		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Assert the Team Extranet Welcome Page is present") {
			AssertElementPresent(
				key_title = "Welcome to the team!",
				locator1 = "TeamExtranet#FRAGMENT_HEADER");
		}
	}

	@description = "This is a test for LPS-148459. Background image changed from the page editor"
	@priority = "3"
	test BackgroundImageChangedFromPageEditor {
		task ("Open to Edit the Home Page") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Home",
				siteName = "${testSiteName}");
		}

		task ("Change the Image of Parallax Container") {
			TeamExtranet.editFragmentImage(
				container = "parallaxContainerImage",
				id = "parallaxContainerImage",
				imageFileName = "entry_01.jpg");
		}

		task ("Assert the Image presence") {
			SelectFrameTop();

			AssertElementPresent(
				id = "parallaxContainerImage",
				key_image = "entry_01.jpg",
				locator1 = "Fragment#BACKGROUND_IMAGE_EDITABLE_FIELD_IMAGE_PROPERTIES");
		}
	}

	@description = "This is a test for LPS-144166. Verify the Blog Entry DPT on Desktop Size"
	@priority = "4"
	test BlogEntryDPTOnDesktopSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Blog Entry") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Blog Entry");
		}

		task ("Go to Preview Mode in Landscape Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Desktop",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Blog Entry DPT on Landscape Phone Size"
	@priority = "4"
	test BlogEntryDPTOnLandscapePhoneSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Blog Entry") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Blog Entry");
		}

		task ("Go to Preview Mode in Landscape Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Landscape Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Blog Entry DPT on Portrait Phone Size"
	@priority = "4"
	test BlogEntryDPTOnPortraitPhoneSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Blog Entry") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Blog Entry");
		}

		task ("Go to Preview Mode in Portrait Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Portrait Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Blog Entry DPT on Tablet Size"
	@priority = "4"
	test BlogEntryDPTOnTabletSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Blog Entry") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Blog Entry");
		}

		task ("Go to Preview Mode in Tablet") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Tablet",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-143304. Can add a Related Item Collection to a Display Page Template"
	@priority = "4"
	test CanAddAnItemCollectionToADPT {
		task ("Add a New Display Page Template to Team Extranet Site") {
			DisplayPageTemplatesAdmin.openDisplayPagesAdmin(siteURLKey = "${testSiteURL}");

			JSONLayoutpagetemplate.addDisplayPageTemplateEntry(
				contentType = "Blogs Entry",
				displayPageTemplateEntryName = "Display Page Template Name",
				groupName = "${testSiteName}");
		}

		task ("Add The Blog Entries Collections to the New DPT") {
			DisplayPageTemplatesAdmin.openDisplayPagesAdmin(siteURLKey = "${testSiteURL}");

			DisplayPageTemplatesAdmin.gotoDisplayPage(displayPageName = "Display Page Template Name");

			PageEditor.addFragment(
				collectionName = "Compositions",
				composition = "true",
				fragmentName = "Blog Entries Collection");

			Button.clickPublish();
		}

		task ("Export the Display Page Template") {
			DisplayPageTemplatesAdmin.openDisplayPagesAdmin(siteURLKey = "${testSiteURL}");

			DisplayPageTemplatesAdmin.gotoDisplayPageEllipsisItem(
				displayPageName = "Display Page Template Name",
				item = "Export");

			DownloadTempFile();
		}

		task ("Delete the Display Page Template") {
			DisplayPageTemplatesAdmin.deleteDisplayPage(displayPageName = "Display Page Template Name");

			DisplayPageTemplatesAdmin.viewDisplayPageNotPresent(displayPageName = "Display Page Template Name");
		}

		task ("Import the Display Page Template Exported and Assert the Fragment Presence") {
			DisplayPageTemplatesAdmin.importDisplayPageTemplateFromTempFolder();

			DisplayPageTemplatesAdmin.viewDisplayPagePresent(displayPageName = "Display Page Template Name");

			DisplayPageTemplatesAdmin.gotoDisplayPage(displayPageName = "Display Page Template Name");

			PageEditor.openPreviewMode();

			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			AssertElementPresent(
				key_fragmentName = "entry-card",
				locator1 = "Masterclass#FRAGMENT_NAME");
		}
	}

	@description = "This is a test for LPS-144161. Can do a search in the Search bar in Mobile Size"
	@priority = "3"
	test CanDoASearchInMobileSize {
		task ("Go to Blog Page") {
			ContentPagesNavigator.openViewContentPage(
				pageName = "Blog",
				siteName = "${testSiteName}");
		}

		task ("Preview the Page with Mobile Size") {
			MobileDevice.previewPG(deviceType = "smartphone");
		}

		task ("Search for Careers in Search Bar") {
			Click(locator1 = "NavBar#TOGGLE_NAVIGATION");

			SearchPortlets.searchEmbedded(searchTerm = "careers");

			SearchResultPortlet.viewSearchResults(
				searchAssetTitle = "Careers",
				searchAssetType = "Page");
		}
	}

	@description = "This is a test for LPS-144161. Can do a search in the Search bar"
	@priority = "3"
	test CanDoASearchInTeamExtranetSearchBar {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Search for Careers in Search Bar") {
			SearchPortlets.searchEmbedded(searchTerm = "careers");

			SearchResultPortlet.viewSearchResults(
				searchAssetTitle = "Careers",
				searchAssetType = "Page");
		}
	}

	@description = "This is a test for LPS-144156. Can Set a Hosted Video URL on a Team Extranet Fragment Video"
	@priority = "4"
	test CanSetAHostedVideoURL {
		task ("Create a new Page by Json") {
			JSONLayout.addPublicLayout(
				groupName = "${testSiteName}",
				layoutName = "Test Page Name",
				type = "content");
		}

		task ("Drag and Drop the Video fragment and Set the Hosted URL") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Test Page Name",
				siteName = "${testSiteName}");

			PageEditor.addFragment(
				collectionName = "Components",
				fragmentName = "Video");

			PageEditor.gotoConfiguration(fragmentName = "Video");

			PageEditor.addVideoFragmentURL(videoLink = "http://localhost:8080/webdav/${testSiteURL}/document_library/home_video.mp4");
		}

		task ("Preview the Page and Assert the fragment is present") {
			Masterclass.previewPageandAssertFragment(fragmentName = "video");
		}
	}

	@description = "This is a test for LPS-144156. Can Set a Non-Hosted Video URL on a Team Extranet Fragment Video"
	@priority = "4"
	test CanSetANonHostedVideoURL {
		task ("Create a new Page by Json") {
			JSONLayout.addPublicLayout(
				groupName = "${testSiteName}",
				layoutName = "Test Page Name",
				type = "content");
		}

		task ("Drag and Drop the Video fragment and Set the Hosted URL") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Test Page Name",
				siteName = "${testSiteName}");

			PageEditor.addFragment(
				collectionName = "Components",
				fragmentName = "Video");

			PageEditor.gotoConfiguration(fragmentName = "Video");

			PageEditor.addVideoFragmentURL(videoLink = "https://www.youtube.com/watch?v=2EPZxIC5ogU");
		}

		task ("Preview the Page and Assert the fragment is present") {
			Masterclass.previewPageandAssertFragment(fragmentName = "video");

			YoutubePortlet.assertVideoTitle(videoTitle = "Life at Liferay - A Look into Liferay Culture");
		}
	}

	@description = "This is a test for LPS-146967. Collections are not created correctly for extranet site initializer"
	@priority = "4"
	test CollectionsAreNotCreatedCorrectly {
		task ("Create a Dynamic Collection") {
			JSONAssetlist.addDynamicAssetListEntryWithItemType(
				groupName = "${testSiteName}",
				itemSubtype = "Entry",
				itemType = "Web Content Article",
				title = "Dynamic Collection Test");
		}

		task ("Create a New Collection Page") {
			PagesAdmin.openPagesAdmin(siteURLKey = "${testSiteURL}");

			ContentPages.addPublicCollectionPage(
				collectionName = "Dynamic Collection Test",
				pageName = "Collection Page Name",
				tabName = "Collections");
		}

		task ("Select the Bordered List in Collection Display") {
			PageEditor.editCollectionDisplay(
				fragmentName = "Collection Display",
				selectedName = "Dynamic Collection Test",
				styleDisplay = "Bordered List");
		}

		task ("Preview the Page and Assert the list of Blog Entries") {
			PageEditor.openPreviewMode();

			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var title : list "25 management tips from top industry experts,00 20 gifts you can give to your marketing boss,What the best Management pros do (and you should too),Great people doing a great job in the design industry,When professionals run into problems with marketing") {
				AssertElementPresent(
					key_title = "${title}",
					locator1 = "TeamExtranet#COLLECTION_DISPLAY_LIST");
			}
		}

		task ("Edit the Dynamic Collection") {
			AssetListsAdmin.openAssetListsAdmin(siteURLKey = "${testSiteURL}");

			AssetListsAdmin.editAssetList(assetListTitle = "Dynamic Collection Test");

			AssetListsAdmin.configureItemTypeInDynamicCollection(
				itemSubtype = "Member",
				itemType = "Web Content Article");
		}

		task ("Edit the Collection Page") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Collection Page Name",
				siteName = "${testSiteName}");

			PageEditor.editCollectionDisplay(
				fragmentName = "Collection Display",
				selectedName = "Dynamic Collection Test",
				styleDisplay = "Bordered List");
		}

		task ("Preview the Page and Assert the list of Members") {
			PageEditor.openPreviewMode();

			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var title : list "Jerome Bell,Jane Cooper,Esther Howard,Kristin Watson,Jacob Jones") {
				AssertElementPresent(
					key_title = "${title}",
					locator1 = "TeamExtranet#COLLECTION_DISPLAY_LIST");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Home page on Desktop Size"
	@priority = "4"
	test HomePageOnDesktopSize {
		task ("Open to Edit the Home Page") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Home",
				siteName = "${testSiteName}");
		}

		task ("Go to Preview Mode in Desktop") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Desktop",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,video,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Home page on Landscape Phone Size"
	@priority = "4"
	test HomePageOnLandscapePhoneSize {
		task ("Open to Edit the Home Page") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Home",
				siteName = "${testSiteName}");
		}

		task ("Go to Preview Mode in Landscape Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Landscape Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,video,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Home page on Portrait Phone Size"
	@priority = "4"
	test HomePageOnPortraitPhoneSize {
		task ("Open to Edit the Home Page") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Home",
				siteName = "${testSiteName}");
		}

		task ("Go to Preview Mode in Desktop") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Portrait Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,video,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Home page on Tablet Size"
	@priority = "4"
	test HomePageOnTabletSize {
		task ("Open to Edit the Home Page") {
			ContentPagesNavigator.openEditContentPage(
				pageName = "Home",
				siteName = "${testSiteName}");
		}

		task ("Go to Preview Mode in Tablet") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Tablet",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,header,video,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Job Position DPT on Desktop Size"
	@priority = "4"
	test JobPositionDPTOnDesktopSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Job Position") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Job Position");
		}

		task ("Go to Preview Mode in Desktop") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Desktop",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Job Position DPT on Landscape Phone Size"
	@priority = "4"
	test JobPositionDPTOnLandscapePhoneSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Job Position") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Job Position");
		}

		task ("Go to Preview Mode in Landscape Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Landscape Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Job Position DPT on Portrait Phone Size"
	@priority = "4"
	test JobPositionDPTOnPortraitPhoneSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Job Position") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Job Position");
		}

		task ("Go to Preview Mode in Portrait Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Portrait Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Job Position DPT on Tablet Size"
	@priority = "4"
	test JobPositionDPTOnTabletSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Job Position") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Job Position");
		}

		task ("Go to Preview Mode in Tablet") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Tablet",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-142641. Verify the Stylebook One is marked as default and includes a thumbnail"
	@priority = "4"
	test StylebookOneIsDefaultAndIncludesAThumbnail {
		task ("Go to Style Books and Assert the Stylebook One Card") {
			StyleBooksAdmin.openStyleBooksAdmin(siteURLKey = "${testSiteURL}");

			StyleBooksAdmin.viewStyleBooksPresent(styleBookName = "Stylebook One");
		}

		task ("Assert the Stylebook One is Masked as Default") {
			LexiconCard.viewCardSticker(
				card = "Stylebook One",
				icon = "check-circle");
		}
	}

	@description = "This is a test for LPS-144166. Verify the Team Member DPT on Desktop Size"
	@priority = "4"
	test TeamMemberDPTOnDesktopSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Team Member") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Team Member");
		}

		task ("Go to Preview Mode in Desktop") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Desktop",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,member-header,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Team Member DPT on Landscape Phone Size"
	@priority = "4"
	test TeamMemberDPTOnLandscapePhoneSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Team Member") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Team Member");
		}

		task ("Go to Preview Mode in Landscape Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Landscape Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,member-header,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Team Member DPT on Portrait Phone Size"
	@priority = "4"
	test TeamMemberDPTOnPortraitPhoneSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Team Member") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Team Member");
		}

		task ("Go to Preview Mode in Portrait Phone") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Portrait Phone",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,member-header,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144166. Verify the Team Member DPT on Tablet Size"
	@priority = "4"
	test TeamMemberDPTOnTabletSize {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Display Page Templates and Team Member") {
			ProductMenu.gotoPortlet(
				category = "Design",
				portlet = "Page Templates");

			NavItem.gotoPageTemplates();

			Navigator.gotoNavTab(navTab = "Display Page Templates");

			LexiconEntry.gotoEntry(rowEntry = "Team Member");
		}

		task ("Go to Preview Mode in Tablet") {
			PageEditor.openPreviewMode();

			PageEditor.switchViewport(
				deviceType = "Tablet",
				modal = "true");
		}

		task ("Assert the Elements are Visible in Frame") {
			SelectFrame.selectFrameNoLoading(locator1 = "IFrame#MODAL_BODY");

			for (var fragmentName : list "navbar,member-header,heading,card,footer") {
				AssertVisible(
					fragmentName = "${fragmentName}",
					index = "1",
					locator1 = "Fragment#FRAGMENT_BODY");
			}
		}
	}

	@description = "This is a test for LPS-144174. Verify the Team Extranet Fragment Components Collection"
	@priority = "4"
	test VerifyFragmentComponentsCollection {
		task ("Go to Team Extranet Fragments Collections") {
			FragmentsAdminNavigator.openFragmentsAdmin(siteURLKey = "${testSiteURL}");

			FragmentsAdminNavigator.gotoCollection(collectionName = "Components");
		}

		task ("Assert the Fragments names on Components Collection") {
			for (var key_card : list "Border,Image,Blog Header,Footer,Heading,Text Block,Main Navbar,Parallax Container,Class Container,Link,Video,Button,Member Header,Job Card,Member Card,Social Links,Entry Card,Home Header,Entry Header") {
				AssertElementPresent(
					key_card = "${key_card}",
					locator1 = "Card#CARD_TITLE");
			}
		}
	}

	@description = "This is a test for LPS-144174. Verify the Team Extranet Fragment Compositions Collection"
	@priority = "4"
	test VerifyFragmentCompositionsCollection {
		task ("Go to Team Extranet Fragments Collections") {
			FragmentsAdminNavigator.openFragmentsAdmin(siteURLKey = "${testSiteURL}");

			FragmentsAdminNavigator.gotoCollection(collectionName = "Compositions");
		}

		task ("Assert the Fragments names on Compositions Collection") {
			for (var key_card : list "Filter Bar,Job Positions Collection,Blog Entries Collection,Page header,Team Members Collection,Section Heading") {
				AssertElementPresent(
					key_card = "${key_card}",
					locator1 = "Card#CARD_TITLE");
			}
		}
	}

	@description = "This is a test for LPS-144835. Verify the search Bar Widget can be embedded in a Custom Fragment"
	@priority = "3"
	test VerifySearchBarEmbeddedInACustomFragment {
		task ("Add a Fragment Collection and go to Team Extranet Fragments Admin") {
			JSONFragment.addFragmentCollection(
				groupName = "${testSiteName}",
				name = "Collection Name");

			FragmentsAdminNavigator.openFragmentsAdmin(siteURLKey = "${testSiteURL}");
		}

		FragmentsAdminNavigator.gotoCollection(collectionName = "Collection Name");

		FragmentsAdmin.addFragment(fragmentName = "Fragment Name");

		var fragmentHtml = '''<lfr-widget-search-bar>''';

		var htmlSnippet = '''<lfr-''';

		FragmentsEditor.autocompleteFragmentHTML(
			autocompleteField = "lfr-widget-search-bar",
			fragmentHtml = "${fragmentHtml}",
			htmlSnippet = "${htmlSnippet}");

		PortletEntry.publish();

		JSONWebcontent.addWebContent(
			content = "WC WebContent Content",
			groupName = "${testSiteName}",
			title = "WC WebContent Title");

		PagesAdmin.openPagesAdmin(siteURLKey = "${testSiteURL}");

		ContentPages.addPrivatePage(pageName = "Test Page");

		PageEditor.addFragment(
			collectionName = "Collection Name",
			fragmentName = "Fragment Name");

		PageEditor.openPreviewMode();

		AssertElementPresent(locator1 = "Search#EMBEDDED_SEARCH_BAR");
	}

	@description = "This is a test for LPS-144161. Verify the Search Bar on Team Extranet Pages"
	@priority = "4"
	test VerifySearchBarOnPages {
		task ("Go to Team Extranet Site Pages and Assert the Search Bar presence") {
			for (var pageName : list "Home,Team,Careers,Blog,Resources,Privacy Policy,Cookie Settings,Search,404") {
				PagesAdmin.openPagesAdmin(siteURLKey = "${testSiteURL}");

				PagesAdmin.gotoPageEllipsisMenuItem(
					menuItem = "View",
					pageName = "${pageName}");

				AssertElementPresent(locator1 = "Search#EMBEDDED_SEARCH_BAR");
			}
		}
	}

	@description = "This is a test for LPS-143303. Verify the 'All articles' in Blog Entry link to Blog page"
	@priority = "3"
	test VerifyTheAllArticlesLinkInBlogEntryLinkToItsPage {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Blog and Open a Blog Entry") {
			Navigator.gotoSitePage(
				pageName = "Blog",
				siteName = "${testSiteName}");

			Masterclass.goToLink(
				key_buttonName = "Read More",
				key_href = "00-20-gifts-you-can-give-to-your-marketing-boss");
		}

		task ("Click on 'All articles' and assert it redirects to Blog Page") {
			Masterclass.goToLink(
				key_buttonName = "All articles",
				key_href = "blog",
				key_title = "20 gifts you can give to your marketing boss");
		}
	}

	@description = "This is a test for LPS-143303. Verify the 'All articles' in Team Member Page link to Blog Page"
	@priority = "3"
	test VerifyTheAllArticlesLinkInTeamMemberLinkToItsPage {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Blog and Open a Blog Entry") {
			Navigator.gotoSitePage(
				pageName = "Team",
				siteName = "${testSiteName}");

			Click(
				key_imageName = "member",
				locator1 = "AdaptiveMedia#IMAGE_VARIANT_SOURCE_URL");
		}

		task ("Click on 'All articles' and assert it redirects to Blog Page") {
			Masterclass.goToLink(
				key_buttonName = "All articles",
				key_href = "blog",
				key_title = "20 gifts you can give to your marketing boss");
		}
	}

	@description = "This is a test for LPS-143303. Verify the 'All open positions' link to Careers page"
	@priority = "3"
	test VerifyTheAllOpenPositionsLinkRedirectsToItsPage {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Go to Blog and Open a Blog Entry") {
			Navigator.gotoSitePage(
				pageName = "Careers",
				siteName = "${testSiteName}");

			Click(
				key_entryTitle = "Growth Product Manager",
				locator1 = "TeamExtranet#TITLE_LINK");
		}

		task ("Click on 'All open positions' and assert it redirects to Careers Page") {
			Masterclass.goToLink(
				key_buttonName = "All open positions",
				key_description = "Careers",
				key_href = "careers");
		}
	}

	@description = "This is a test for LPS-146737. Verify the 'Go to Home Page' button in 404 Page redirects to the Home Page"
	@priority = "3"
	test VerifyTheErrorPageButtonGoToHomePage {
		task ("Go to Error Page in Team Extranet Site") {
			PagesAdmin.openPagesAdmin(siteURLKey = "${testSiteURL}");

			PagesAdmin.gotoPageEllipsisMenuItem(
				menuItem = "View",
				pageName = "404");
		}

		task ("Click to Go to Home Page and Assert the Page is redirected correctly") {
			Click(
				key_buttonName = "Go to home page",
				key_href = "home",
				locator1 = "TeamExtranet#FRAGMENT_BUTTON");

			AssertElementPresent(
				key_title = "Welcome to the team!",
				locator1 = "TeamExtranet#FRAGMENT_HEADER");
		}
	}

	@description = "This is a test for LPS-146737. Verify the Error Page can be displayed"
	@priority = "3"
	test VerifyTheErrorPageCanBeDisplayed {
		task ("Go to Error Page in Team Extranet Site") {
			PagesAdmin.openPagesAdmin(siteURLKey = "${testSiteURL}");

			PagesAdmin.gotoPageEllipsisMenuItem(
				menuItem = "View",
				pageName = "404");
		}

		task ("Assert the Error Page is displayed correctly") {
			AssertElementPresent(
				key_title = "Page not Found",
				locator1 = "TeamExtranet#FRAGMENT_HEADING");
		}
	}

	@description = "This is a test for LPS-143303. Verify all the links present in the Home Page redirect to their respective pages"
	@priority = "4"
	test VerifyTheLinksRedirectsToItsPage {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click in The 'All blog articles' link and assert it redirects to Blog Page") {
			Masterclass.goToLink(
				key_buttonName = "All blog articles",
				key_href = "blog",
				key_title = "20 gifts you can give to your marketing boss");
		}

		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click in The 'All job positions' link and assert it redirects to Careers Page") {
			Masterclass.goToLink(
				key_buttonName = "All job positions",
				key_description = "Careers",
				key_href = "careers");
		}

		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click in The 'All team members' link and assert it redirects to Team Page") {
			Masterclass.goToLink(
				key_buttonName = "All team members",
				key_description = "Team",
				key_href = "team");
		}
	}

	@description = "This is a test for LPS-143303. Verify the Page Titles redirect to their respective pages"
	@priority = "4"
	test VerifyThePageTitlesRedirectsToItsPage {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click on the Careers Card Title and Assert it is redirected to Careers Page") {
			Click(
				key_entryTitle = "Browse all the open job positions",
				locator1 = "TeamExtranet#CARD_TITLE_LINK");

			AssertElementPresent(
				key_description = "Careers",
				locator1 = "TeamExtranet#FRAGMENT_TEXT_BLOCK");
		}

		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click on the Team Card Title and Assert it is redirected to Team Page") {
			Click(
				key_entryTitle = "Meet the members of the team",
				locator1 = "TeamExtranet#CARD_TITLE_LINK");

			AssertElementPresent(
				key_description = "Team",
				locator1 = "TeamExtranet#FRAGMENT_TEXT_BLOCK");
		}

		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click on the Blog Card Title and Assert it is redirected to Blog Page") {
			Click(
				key_entryTitle = "Stay on top of the latest news",
				locator1 = "TeamExtranet#CARD_TITLE_LINK");

			AssertElementPresent(
				key_title = "20 gifts you can give to your marketing boss",
				locator1 = "TeamExtranet#FRAGMENT_HEADING");
		}
	}

	@description = "This is a test for LPS-143303. Verify the 'View More' links redirect to their respective pages"
	@priority = "4"
	test VerifyTheViewMoreRedirectsToItsPage {
		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click on 'View more' in Careers card and assert it is redirected to Careers Page") {
			Masterclass.goToLink(
				key_buttonName = "View more",
				key_description = "Careers",
				key_href = "careers");
		}

		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click on 'View more' in Team card and assert it is redirected to Team Page") {
			Masterclass.goToLink(
				key_buttonName = "View more",
				key_description = "Team",
				key_href = "/web/${testSiteURL}/team");
		}

		task ("Go to Team Extranet Site") {
			ApplicationsMenu.gotoSite(site = "${testSiteName}");
		}

		task ("Click on 'View more' in Blog card and assert it is redirected to Blog Page") {
			Masterclass.goToLink(
				key_buttonName = "View more",
				key_href = "blog",
				key_title = "20 gifts you can give to your marketing boss");
		}
	}

	@description = "This is a test for LPS-142641. View the Team Extranet Categories"
	@priority = "3"
	test ViewTeamExtranetCategories {
		task ("Go to Team Extranet Categories") {
			Category.openCategoriesAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert the Regions Categories are present") {
			for (var categoryName : list "Asia Pacific,Europe,Latin America,Middle East & Africa,North America") {
				Category.viewCP(
					categoryName = "${categoryName}",
					vocabularyName = "Regions");
			}
		}

		task ("Go to Roles and Assert the Categories are Presente") {
			Click(
				categoryName = "Roles",
				locator1 = "ContentDashboard#CATEGORY_NAME_ELEMENT");

			for (var categoryName : list "Product Management,Marketing,Product Design") {
				Category.viewCP(
					categoryName = "${categoryName}",
					vocabularyName = "Roles");
			}
		}
	}

	@description = "This is a test for LPS-142641. View the Team Extranet Collections"
	@priority = "3"
	test ViewTeamExtranetCollections {
		task ("Go to Team Extranet Collections") {
			AssetListsAdmin.openAssetListsAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert the Collections are present") {
			for (var key_title : list "Blog Entries,Featured Blog Entries,Team Members,Job Positions") {
				AssertElementPresent(
					key_title = "${key_title}",
					locator1 = "ItemSelector#LOCATION_INFO_LIST_GENERIC");
			}
		}
	}

	@description = "This is a test for LPS-142641. View the Team Extranet Documents and Media"
	@priority = "4"
	test ViewTeamExtranetDocumentsAndMedia {
		property portal.acceptance = "true";

		task ("Go to Team Extranet Documents and Media") {
			DMNavigator.openDocumentsAndMediaAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert the 22 Documents are present") {
			Pagination.changePagination(itemsPerPage = "40");

			for (var key_card : list "site_logo_i.svg,member_peter_doe.jpg,member_kristin_watson.jpg,member_jerome_bell.jpg,member_jacob_jones.jpg,member_esther_howard.jpg,member_brooklyn_simmons.jpg,member_arlene_maccoy.jpg,member_albert_frank.jpg,home_video.mp4,entry_10.jpg,entry_09.jpg,entry_08.jpg,entry_07.jpg,entry_06.jpg,entry_05.jpg,entry_04.jpg,entry_03.jpg,entry_02.jpg,entry_01.jpg,arrow_down.svg") {
				AssertElementPresent(
					key_card = "${key_card}",
					locator1 = "Card#CARD_TITLE");
			}
		}
	}

	@description = "This is a test for LPS-142641. View the Team Extranet Fragments"
	@priority = "4"
	test ViewTeamExtranetFragments {
		property portal.acceptance = "true";

		task ("Go to Team Extranet Fragments Collections") {
			FragmentsAdminNavigator.openFragmentsAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert the Fragments Collections are present") {
			for (var key_card : list "Image,Blog Header,Footer,Heading,Text Block,Main Navbar,Parallax Container,Class Container,Link,Video,Button,Member Header,Job Card,Member Card,Social Links,Entry Card,Home Header,Entry Header") {
				AssertElementPresent(
					key_card = "${key_card}",
					locator1 = "Card#CARD_TITLE");
			}
		}
	}

	@description = "This is a test for LPS-142641. View the Team Extranet Pages"
	@priority = "4"
	test ViewTeamExtranetPages {
		property portal.acceptance = "true";

		task ("Go to Team Extranet Pages") {
			PagesAdmin.openPagesAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert the Team Extranet Pages are present") {
			for (var pageName : list "Home,Team,Careers,Blog,Resources,Privacy Policy,Cookie Settings") {
				AssertVisible(
					key_itemName = "${pageName}",
					locator1 = "PagesAdmin#LIST_GROUP_ITEM");
			}
		}
	}

	@description = "This is a test for LPS-142641. View the Team Extranet Page Templates"
	@priority = "4"
	test ViewTeamExtranetPageTemplates {
		property portal.acceptance = "true";

		task ("Go to Masters Page Templates in Team Extranet Site") {
			MastersPageTemplatesAdmin.openMastersAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert Masters Page Templates are present") {
			for (var masterLayoutName : list "Blank,Master") {
				MastersPageTemplatesAdmin.viewMastersPresent(masterLayoutName = "${masterLayoutName}");
			}
		}

		task ("Go to Display Page Templates in Team Extranet Site") {
			DisplayPageTemplatesAdmin.openDisplayPagesAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert Display Page Templates are present") {
			for (var displayPageName : list "Blog Entry,Job Position,Team Member") {
				DisplayPageTemplatesAdmin.viewDisplayPagePresent(displayPageName = "${displayPageName}");
			}
		}
	}

	@description = "This is a test for LPS-142641. View the Team Extranet Web Content"
	@priority = "4"
	test ViewTeamExtranetWebContent {
		property portal.acceptance = "true";

		task ("Go to Team Extranet Web Content") {
			WebContentNavigator.openWebContentAdmin(siteURLKey = "${testSiteURL}");
		}

		task ("Assert the 8 Team Members in Web Content are present") {
			WebContentFolder.gotoCP(
				folderName = "Team Members",
				webContentTitle = "Team Members");

			for (var webContentTitle : list "Jerome Bell,Jane Cooper,Esther Howard,Kristin Watson,Jacob Jones,Arlene MacCoy,Jacob Jones,Brooklyn Simmons") {
				WebContent.viewTitle(webContentTitle = "${webContentTitle}");
			}
		}

		task ("Assert the 9 Job Positions in Web Content are present") {
			WebContentNavigator.openWebContentAdmin(siteURLKey = "${testSiteURL}");

			WebContentFolder.gotoCP(
				folderName = "Job Positions",
				webContentTitle = "Job Positions");

			for (var webContentTitle : list "Senior Design Manager,SEO Specialist,Banking Product Manager,Junior Visual Designer,Marketing Lead,Principal Product Manager,Senior Product Designer,E-Commerce Marketing Specialist,Growth Product Manager") {
				WebContent.viewTitle(webContentTitle = "${webContentTitle}");
			}
		}

		task ("Assert the 9 Blog Entries in Web Content are present") {
			WebContentNavigator.openWebContentAdmin(siteURLKey = "${testSiteURL}");

			WebContentFolder.gotoCP(
				folderName = "Blog Entries",
				webContentTitle = "Blog Entries");

			for (var webContentTitle : list "25 management tips from top industry experts,00 20 gifts you can give to your marketing boss,What the best Management pros do (and you should too),Great people doing a great job in the design industry,When professionals run into problems with marketing,5 tools everyone in the design industry should be using,Meet the Steve Jobs of the marketing industry") {
				WebContent.viewTitle(webContentTitle = "${webContentTitle}");
			}

			WebContent.viewTitle(
				webContentTitle = '''The worst advice we've ever heard about management''',
				webContentTitleEscapeCharacter = '''The worst advice we&#39;ve ever heard about management''');

			WebContent.viewTitle(
				webContentTitle = '''Think you're cut out for doing management?''',
				webContentTitleEscapeCharacter = '''Think you&#39;re cut out for doing management?''');
		}

		task ("Go to Structures tab and assert the 3 Structures Names are present") {
			NavItem.gotoStructures();

			for (var webContentTitle : list "Position,Member,Entry") {
				WebContentStructures.viewCP(structureName = "${structureName}");
			}
		}

		task ("Go to Templates tab and assert the 3 Templates Cards are present") {
			Navigator.gotoNavItem(navItem = "Templates");

			for (var templateName : list "Position,Member,Entry") {
				WebContentTemplates.viewCardsEntryCP(templateName = "${templateName}");
			}
		}
	}

}