@component-name = "portal-analytics-cloud"
definition {

	property analytics.cloud.enabled = "true";
	property minimum.slave.ram = "32";
	property portal.release = "false";
	property portal.upstream = "true";
	property testray.main.component.name = "Analytics Cloud";

	setUp {
		ACUtils.launchAC();

		ACSettings.takeTokenFromAnalyticsCloud();

		TestCase.setUpPortalInstance();

		ACUtils.launchDXP();
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		ACUtils.tearDownDXP();

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}

		ACUtils.tearDownAC();
	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8293 | Test Summary: Assert 180 Day time period filter in Sites"
	@ignore = "true"
	@priority = "3"
	test Assert180DayTimePeriodFilterInSites {

		// TODO LRAC-8293 Assert180DayTimePeriodFilterInSites

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8291 | Test Summary: Assert Sites Activities 180 Days Time Period Filter In Page Table"
	@ignore = "true"
	@priority = "3"
	test AssertSitesActivities180DaysTimePeriodFilterInPageTable {

		// TODO LRAC-8291 AssertSitesActivities180DaysTimePeriodFilterInPageTable

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8282 | Test Summary: Anonymous converts to known"
	@ignore = "true"
	@priority = "4"
	test CanAnonymousIndividualsConvertsToKnownIndividuals {

		// TODO LRAC-8282 CanAnonymousIndividualsConvertsToKnownIndividuals

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8275 | Test Summary: Site Activity Card: Can filter graph by day"
	@ignore = "true"
	@priority = "5"
	test CanFilterActivityCardGraphByDay {

		// TODO LRAC-8275 CanFilterActivityCardGraphByDay

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8278 | Test Summary: Site Activity Card: Can filter graph by month"
	@priority = "5"
	test CanFilterActivityCardGraphByMonth {
		property portal.upstream = "quarantine";

		// AC Refactor: the issue is due to data not appearing on time
		// AC Refactor ticket: LRAC-8772

		task ("Site and blogs creation and connection with AC") {
			ACUtils.addSiteAndPage();

			ACUtils.createBlogsAndAddToPage(entryTitle = "Test 2");

			var propertyName = ACDXPSettings.connectDXPtoAnalyticsCloud(siteName = "Site Name");
		}

		task ("Interation with pages") {
			Navigator.gotoSitePage(
				pageName = "AC Page",
				siteName = "Site Name");

			BlogsNavigator.gotoPG(entryTitle = "Test 2");

			ACUtils.closeAllSessions();
		}

		task ("AC launch and go to property menu") {
			ACUtils.launchAC();

			ACProperties.switchProperty(propertyName = "${propertyName}");
		}



		

		task ("Asset in the Activity card graph by month filter") {

			// Unable to perform the declaration because the data does not appear at the time

			ACNavigation.switchTab(tabName = "Overview");

			ACCards.viewCards(cardTitle = "${propertyName} Activities");

			ACCards.clickFilterByMonth();

			ACUtils.assertXAxisTimedGraph(parentName = "${propertyName} Activities");
		}
	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8276 | Test Summary: Site Activity Card: Can filter graph by week"
	@ignore = "true"
	@priority = "5"
	test CanFilterActivityCardGraphByWeek {

		// TODO LRAC-8276 CanFilterActivityCardGraphByWeek

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8279 | Test Summary: Site Activity Card: Can hover over a point on the graph to get detailed stats"
	@ignore = "true"
	@priority = "5"
	test CanHoverOverPointOnGraphGetStats {

		// TODO LRAC-8279 CanHoverOverPointOnGraphGetStats

	}

	@description = "Bug ID: LRAC-7996 | Automation ID: LRAC-8110 | Test Summary: Assert Sites Activity loads activity data properly when the time filter is set to 'Last 24 hours'"
	@ignore = "true"
	@priority = "5"
	test CanLoadDataProperlyWhenTimeFilterIsLast24Hours {
		ACTimeFilter.clickTimeFilterButton();
		ACTimeFilter.setLast24Hours();
		ACUtils.assertXAxisTimedGraph(parentName = "Beryl Commerce Activities");
	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8280 | Test Summary: Anon and known visitors legend shown"
	@priority = "5"
	test CanShownAnonAndKnownVisitorsLegend {
		task ("Connect Analytics Cloud to DXP") {
			var propertyName = ACDXPSettings.connectDXPtoAnalyticsCloud();
		}

		task ("Visits the site with known user") {
			Navigator.openURL();

			Pause(locator1 = "5000");
		}

		task ("Visits the site with anonymous user") {
			User.logoutPG();

			Navigator.openURL();
		}

		task ("Close sessions") {
			ACUtils.closeAllSessions();

			Pause(locator1 = "30000");
		}

		task ("Switch to new property in AC and go to Sites") {
			ACUtils.launchAC();

			ACProperties.switchProperty(propertyName = "${propertyName}");

			ACNavigation.goToSites();
		}

		task ("Go to Sites overview") {
			ACTimeFilter.clickTimeFilterButton();

			ACTimeFilter.setLast24Hours();
		}

		task ("Verify if anonymous and known users legends are shown") {
			for (var visitor : list "Anonymous,Known") {
				AssertElementPresent(
					key_visitorLegend = "${visitor} Visitors",
					locator1 = "ACIndividualsDashboard#VISITORS_LEGEND");

				MouseOver(
					key_visitorLegend = "${visitor} Visitors",
					locator1 = "ACIndividualsDashboard#VISITORS_LEGEND");

				AssertElementPresent(locator1 = "ACIndividualsDashboard#ACTIVE_INDIVIDUAL_CHART");
			}
		}
	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8281 | Test Summary: Anon and known visitors popover shows breakdown"
	@ignore = "true"
	@priority = "5"
	test CanShownAnonAndKnownVisitorsPopoverBreakdown {

		// TODO LRAC-8281 CanShownAnonAndKnownVisitorsPopoverBreakdown

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8295 | Test Summary: Assert Sites Activity time filter able to use Custom Range"
	@ignore = "true"
	@priority = "5"
	test CanSitesActivityTimeFilterUseCustomRange {

		// TODO LRAC-8295 CanSitesActivityTimeFilterUseCustomRange

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8290 | Test Summary: Unique Visitors label is shown on the tabs of Pages dashboards"
	@ignore = "true"
	@priority = "3"
	test CanUniqueVisitorsLabelShowPagesDashboards {

		// TODO LRAC-8290 CanUniqueVisitorsLabelShowPagesDashboards

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8288 | Test Summary: Unique Visitors label is shown on the tabs of Sites dashboards"
	@ignore = "true"
	@priority = "3"
	test CanUniqueVisitorsLabelShowSitesDashboards {

		// TODO LRAC-8288 CanUniqueVisitorsLabelShowSitesDashboards

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8274 | Test Summary: Site Activity Card: Bounce rate and % change is shown"
	@ignore = "true"
	@priority = "5"
	test ShownBounceRateAndPercentageChangeShown {

		// TODO LRAC-8274 ShownBounceRateAndPercentageChangeShown

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8273 | Test Summary: Site Activity Card: Session duration and % change is shown"
	@ignore = "true"
	@priority = "5"
	test ShownSessionDurationAndPercentageChangeShown {

		// TODO LRAC-8273 ShownSessionDurationAndPercentageChangeShown

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8272 | Test Summary: Site Activity Card: Total Sessions/Visitor and % change is shown"
	@ignore = "true"
	@priority = "5"
	test ShownTotalSessionsVisitorAndPercentageChangeShown {

		// TODO LRAC-8272 ShownTotalSessionsVisitorAndPercentageChangeShown

	}

	@description = "Feature ID: Legacy | Automation ID: LRAC-8271 | Test Summary: Site Activity Card: Total site visitors and % change is shown"
	@ignore = "true"
	@priority = "5"
	test ShownTotalSiteVisitorsAndPercentageChangeShown {

		// TODO LRAC-8271 ShownTotalSiteVisitorsAndPercentageChangeShown

	}

}