@component-name = "portal-staging"
definition {

	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Staging";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		JSONGroup.addGroup(groupName = "Site Name");

		JSONLayout.addPublicLayout(
			groupName = "Site Name",
			layoutName = "Staging Test Page");

		JSONStaging.enableLocalStaging(groupName = "Site Name");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			JSONGroup.deleteGroupByName(groupName = "Site Name");
		}
	}

	@priority = "5"
	test ActivateStagingForSiteWithTheme {
		property test.name.skip.portal.instance = "StagingUsecase#ActivateStagingForSiteWithTheme";

		FileInstall.deployFileOnServer(jarFile = "test-theme.war");

		WaitForConsoleTextPresent(value1 = "STARTED test-theme");

		Page.changeSinglePageTheme(themeName = "test-theme-7-4");

		Navigator.gotoBack();

		Button.clickPublish();

		JSONStaging.enableLocalStaging(
			branchingPrivate = "true",
			branchingPublic = "true",
			groupName = "Guest");

		Navigator.openStagingSiteURL(defaultSite = "true");

		Theme.viewTestThemeBackgroundColor();

		Navigator.openURL();

		Theme.viewTestThemeBackgroundColor();
	}

	@description = "This is a use case for LPS-98170"
	@priority = "4"
	test AssertAssetPriorityNotBeResetAfterPublication {
		JSONLayout.addPublicLayout(
			groupName = "Site Name (Staging)",
			layoutName = "Second Test Page",
			site = "false");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Asset Publisher");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.configureShowMetadataFieldsPG(
			addMetadata = "true",
			metadataFieldList = "Priority",
			portletName = "Asset Publisher");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Second Test Page",
			site = "false",
			widgetName = "Asset Publisher");

		Navigator.gotoStagedSitePage(
			pageName = "Second Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.configureShowMetadataFieldsPG(
			addMetadata = "true",
			metadataFieldList = "Priority",
			portletName = "Asset Publisher");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddCP();

		WebContent.addWithPriorityCP(
			assetPriority = "1.1",
			webContentContent = "Web Content Content",
			webContentTitle = "Web Content Title");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.viewPG(
			assetContent = "Web Content Content",
			assetPriority = "1.1",
			assetTitle = "Web Content Title");

		Navigator.gotoSitePage(
			pageName = "Second Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.viewPG(
			assetContent = "Web Content Content",
			assetPriority = "1.1",
			assetTitle = "Web Content Title");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoStructures();

		WebContentStructures.addCP(
			structureDescription = "WC Structure Description",
			structureName = "WC Structure Name");

		DataEngine.addField(
			fieldFieldLabel = "Link to Page",
			fieldName = "Link to Page");

		WebContentStructures.saveCP(structureName = "WC Structure Name");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoTemplates();

		WebContentTemplates.addCP(
			structureName = "WC Structure Name",
			templateDescription = "WC Template Description",
			templateFieldNames = "Link to Page",
			templateName = "WC Template Name");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddWithStructureCP(structureName = "WC Structure Name");

		WebContent.addWithStructureCP(
			structureName = "WC Structure Name",
			templateName = "WC Template Name",
			webContentLinkToPage = "Second Test Page",
			webContentTitle = "WC WebContent Title 2");

		PortletEntry.publish();

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Web Content Display");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.selectWebContent(webContentTitle = "WC WebContent Title 2");

		WebContentDisplayPortlet.viewContent(
			displayText = "Link to Page",
			pageName = "Second Test Page",
			webContentTitle = "WC WebContent Title 2");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.viewPG(
			assetContent = "Web Content Content",
			assetPriority = "1.1",
			assetTitle = "Web Content Title");

		Navigator.gotoSitePage(
			pageName = "Second Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.viewPG(
			assetContent = "Web Content Content",
			assetPriority = "1.1",
			assetTitle = "Web Content Title");
	}

	@description = "This is a use case for LPS-128736."
	@priority = "4"
	test AssertContentNotBePublishedByDefault {
		property test.name.skip.portal.instance = "StagingUsecase#AssertContentNotBePublishedByDefault";

		APNavigator.openToConfigInSystemSettings(portlet = "Asset Publisher");

		AssertNotChecked.assertNotCheckedNotVisible(
			key_settingFieldName = "Enable Dynamic Export",
			locator1 = "SystemSettings#SETTING_FIELD_NAME_CHECKBOX");

		JSONWebcontent.addWebContent(
			content = "WC WebContent Content",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "WC WebContent Title");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Asset Publisher");

		Navigator.openStagingSiteURL(siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(uncheckContentNameList = "Web Content");

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		Alert.viewInfoMessageSpecific(infoMessage = "There are no results.");
	}

	@description = "This is a use case for LPS-71786"
	@priority = "3"
	test AssertDeletedAssetLinkRemovedFromLiveSite {
		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Blogs");

		JSONDocument.addFileWithUploadedFile(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title 1",
			groupName = "Site Name-staging",
			mimeType = "image/jpeg",
			sourceFileName = "Document_1.jpg");

		JSONDocument.addFileWithUploadedFile(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title 2",
			groupName = "Site Name-staging",
			mimeType = "image/jpeg",
			sourceFileName = "Document_2.jpg");

		BlogsNavigator.openBlogsAdmin(siteURLKey = "site-name-staging");

		BlogsNavigator.gotoAddEntry();

		BlogsEntry.addEntryContent(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		RelatedAssets.selectAsset(
			assetAll = "true",
			assetType = "Basic Document");

		PortletEntry.publish();

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		BlogsNavigator.gotoEntryPG(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		BlogsEntry.viewPG(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		for (var assetTitle : list "DM Document Title 1,DM Document Title 2") {
			BlogsEntry.viewRelatedAssetPG(
				assetTitle = "${assetTitle}",
				assetType = "Basic Document",
				entryTitle = "Blogs Entry Title");
		}

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		BlogsNavigator.gotoEditPG(entryTitle = "Blogs Entry Title");

		RelatedAssets.removeAsset(removeAssetTitle = "DM Document Title 2");

		PortletEntry.publish();

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		BlogsNavigator.gotoEntryPG(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		BlogsEntry.viewPG(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		BlogsEntry.viewRelatedAssetPG(
			assetTitle = "DM Document Title 1",
			assetType = "Basic Document",
			entryTitle = "Blogs Entry Title");

		BlogsEntry.viewNoRelatedAssetPG(assetTitle = "DM Document Title 2");
	}

	@description = "This is a use case for LPS-123156."
	@priority = "3"
	test AssertPublishTemplateInfo {
		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addPublishTemplate(
			publishTemplateDescription = "New Publish Template Description",
			publishTemplateName = "New Publish Template");

		Staging.savePublishTemplate(
			publishTemplateDescription = "New Publish Template Description",
			publishTemplateName = "New Publish Template");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addCustomPublication(publishTemplateName = "New Publish Template");

		ControlMenu.viewHeaderTitle(headerTitle = "New Publish Process Based on New Publish Template");
	}

	@description = "This is a use case for LPS-123156."
	@priority = "3"
	test AssertScheduledPublicationInfo {
		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.gotoNavTab(tabName = "Scheduled");

		AssertTextEquals(
			locator1 = "Message#EMPTY_INFO",
			value1 = "No scheduled publish processes were found.");

		Staging.gotoNavTab(tabName = "Processes");

		Staging.publishCustomPublication(scheduleProcess = "true");

		Staging.gotoNavTab(tabName = "Scheduled");

		AssertTextPresent(
			locator1 = "StagingPublishToLive#SCHEDULED_TABLE_TITLE",
			value1 = "Untitled Scheduled Publish Process");
	}

	@description = "This is a use case for LPS-123156"
	@priority = "4"
	test AssertStagingPublicationAndProcessesMessage {
		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.viewPublishTask(publicationTitle = "Initial Publish Process");

		Staging.deletePublishTask(publicationTitle = "Initial Publish Process");

		AssertTextEquals(
			locator1 = "Message#EMPTY_INFO",
			value1 = "No publish processes were found.");

		Navigator.openStagingSiteURL(siteName = "Site Name");

		Staging.gotoPublishToLive();

		AssertElementPresent(locator1 = "StagingPublishToLive#CHANGES_SINCE_LAST_PUBLISH_PROCESS");

		AssertTextEquals(
			locator1 = "StagingPublishToLive#PUBLISH_SIMPLE_HELP_TEXT",
			value1 = "Simple publish process includes the publishing of theme and site pages settings, logo, deletions, and permissions.");

		Staging.configurePublishToLive();

		AssertTextEquals(
			locator1 = "StagingPublishToLive#SWITCH_TO_SIMPLE_PUBLICATION",
			value1 = "Switch to Simple Publish Process");

		AssertElementNotPresent(locator1 = "Staging#LIVE_BUTTON");
	}

	@description = "This is a use case for LPS-95516."
	@priority = "3"
	test AssertWebContentNotBeDeletedOnLiveViaSAP {
		JSONWebcontent.addWebContent(
			content = "WC WebContent Content 1",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "WC WebContent Title 1");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		Staging.publishViaSAP(
			confirmMessage = "Are you sure you want to publish the selected web content?",
			entry = "WC WebContent Title 1");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "WC WebContent Title 1");

		JSONWebcontent.deleteWebContent(
			groupName = "Site Name (Staging)",
			site = "false",
			title = "WC WebContent Title 1");

		JSONWebcontent.addWebContent(
			content = "WC WebContent Content 2",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "WC WebContent Title 2");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		Staging.publishViaSAP(
			confirmMessage = "Are you sure you want to publish the selected web content?",
			entry = "WC WebContent Title 2");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "WC WebContent Title 1");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "WC WebContent Title 2");
	}

	@priority = "5"
	test ContentCannotBeCreatedOnLive {
		property portal.acceptance = "true";

		Tag.openTagsAdmin(siteURLKey = "site-name");

		Staging.viewAddButtonDoesNotExist();

		Category.openCategoriesAdmin(siteURLKey = "site-name");

		Staging.viewAddButtonDoesNotExist();

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		NavItem.gotoTemplates();

		Staging.viewAddButtonDoesNotExist();

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		NavItem.gotoStructures();

		Staging.viewAddButtonDoesNotExist();
	}

	@priority = "5"
	test DeleteLivePage {
		property portal.acceptance = "true";

		JSONLayout.addPublicLayout(
			groupName = "Site Name (Staging)",
			layoutName = "Delete Live Page",
			site = "false");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Delete Live Page",
			siteName = "Site Name");

		PagesAdmin.openPagesAdmin(siteURLKey = "site-name");

		PagesAdmin.deletePage(pageName = "Delete Live Page");

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Page.viewNoPG(pageName = "Delete Live Page");
	}

	@priority = "4"
	test EditPublishTemplate {
		property test.name.skip.portal.instance = "StagingUsecase#EditPublishTemplate";

		JSONLayout.addPublicLayout(
			groupName = "Site Name (Staging)",
			layoutName = "Page Name 2",
			site = "false");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Page Name 2",
			site = "false",
			widgetName = "Web Content Display");

		Navigator.gotoStagedSitePage(
			pageName = "Page Name 2",
			siteName = "Site Name");

		WebContentDisplayPortlet.add(
			webContentContent = "WC WebContent Content",
			webContentTitle = "WC WebContent Title");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "WC WebContent Content",
			webContentTitle = "WC WebContent Title");

		BlogsNavigator.openBlogsAdmin(siteURLKey = "site-name-staging");

		Blogs.addEntry(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.configurePublishToLive(
			checkPageName = "Staging Test Page",
			uncheckContentNameList = "Blogs");

		Staging.savePublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.viewPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name",
			uncheckContentNameList = "Blogs");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLivePublishTemplate(
			publishTemplateName = "Publish Template Name",
			siteName = "Site Name");

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Page.viewSpecificPG(pageNameList = "Staging Test Page");

		Page.viewNoPG(pageName = "Page Name 2");

		BlogsNavigator.openBlogsAdmin(siteURLKey = "site-name");

		BlogsEntry.viewNoCP(entryTitle = "Blogs Entry Title");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.viewPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.editPublishTemplate(
			publishTemplateDescriptionEdit = "Publish Template Description Edit",
			publishTemplateName = "Publish Template Name",
			publishTemplateNameEdit = "Publish Template Name Edit");

		Staging.configurePublishToLive(
			checkContentNameList = "Blogs",
			checkPageName = "Pages");

		Staging.savePublishTemplate(
			publishTemplateDescription = "Publish Template Description Edit",
			publishTemplateName = "Publish Template Name Edit");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLivePublishTemplate(
			publishTemplateName = "Publish Template Name Edit",
			siteName = "Site Name");

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Page.viewSpecificPG(pageNameList = "Staging Test Page");

		Page.viewSpecificPG(pageNameList = "Page Name 2");

		Navigator.gotoSitePage(
			pageName = "Page Name 2",
			siteName = "Site Name");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "WC WebContent Content",
			webContentTitle = "WC WebContent Title");

		BlogsNavigator.openBlogsAdmin(siteURLKey = "site-name");

		BlogsEntry.viewContent(entryTitle = "Blogs Entry Title");
	}

	@priority = "5"
	test ImportLARsOnStagedSite {
		property portal.acceptance = "true";
		property testray.component.names = "Site Pages Administration,Training,Web Content Administration";

		LAR.importSiteCP(
			larFileName = "HR_Home_Page_Content_master.lar",
			mirrorWithOverwriting = "true",
			siteName = "Site Name Staging",
			uploadFrom = "dependencies");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive(publicationName = "Content Update");

		Navigator.gotoSitePage(
			pageName = "Home",
			siteName = "Site Name");

		AssertTextEquals(
			index = "1",
			locator1 = "WCD#WEB_CONTENT_CONTENT",
			value1 = "Faculty Meet-and-Greet Brunch Events All faculty are invited to a Meet-and-Greet Brunch at Allen Café 11:00 A.M. Saturday, June 13. This brunch is intended to introduce new faculty members and promote inter-departmental unity. Brunch will be catered by the Provincetown chapter of the NECI.");

		AssertTextEquals(
			index = "2",
			locator1 = "WCD#WEB_CONTENT_CONTENT",
			value1 = "New Faculty and Staff Orientation Events Attention all new faculty and staff: Orientation will be held Monday, June 8 at 8:00 A.M. New faculty should meet in Rm. 221 and new staff should meet in Rm. 139 of Adams Hall. A full schedule of orientation will be emailed to you in the coming weeks.");

		AssertTextEquals(
			index = "3",
			locator1 = "WCD#WEB_CONTENT_CONTENT",
			value1 = "Vaccinations and Physical Check-Ups Health Any members of faculty or staff planning to leave Earth are required to have up-to-date vaccinations. Please check with the Health Center on your status. In addition, each and every Earth departure requires a physical check-up. The Health Center is happy to give both vaccinations and physical check-ups free of charge.");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		for (var webContentTitle : list "Meet and Greet,Orientation,Physicals") {
			WebContent.viewTitle(
				onLive = "true",
				webContentTitle = "${webContentTitle}");
		}

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		LAR.importPortlet(
			larFileName = "HR_WebContent_master.lar",
			uploadFrom = "dependencies");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Site Name");

		Portlet.deletePG(portletName = "Activities");

		Portlet.deletePG(portletName = "Web Content Display");

		Portlet.deletePG(portletName = "Web Content Display");

		Portlet.deletePG(portletName = "Web Content Display");

		takeScreenshot();

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Site Name");

		Portlet.viewNoSpecificPG(portletName = "Activities");

		Portlet.viewNoSpecificPG(portletName = "Web Content Display");

		WidgetPages.addRecentContent(assetTitle = "Enrollment Features");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Site Name");

		WidgetPages.addRecentContent(assetTitle = "The SPACE Family");

		Portlet.gotoPortletOptions(
			portletName = "Web Content Display",
			portletOption = "Look and Feel Configuration");

		IFrame.selectConfigurationFrame();

		Portlet.configureGeneralViaLookAndFeelPG(applicationDecorators = "Barebone");

		Navigator.gotoStagedSitePage(
			pageName = "Home",
			siteName = "Site Name");

		Portlet.viewApplicationDecorator(decorator = "Barebone");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Home",
			siteName = "Site Name");

		Portlet.viewNoSpecificPG(portletName = "Activities");

		Portlet.viewApplicationDecorator(decorator = "Barebone");

		AssertTextEquals(
			index = "2",
			locator1 = "WCD#WEB_CONTENT_CONTENT",
			value1 = "You're a part of the S.P.A.C.E. family");

		AssertTextEquals.assertPartialText(
			index = "1",
			locator1 = "WCD#WEB_CONTENT_CONTENT",
			value1 = "Faculty Meet-and-Greet Brunch");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		for (var webContentTitle : list "Meet and Greet,Orientation,Physicals,Enrollment Features,The SPACE Family") {
			WebContent.viewTitle(
				onLive = "true",
				webContentTitle = "${webContentTitle}");
		}
	}

	@priority = "3"
	test ModifyInitalPageVariationSetup {
		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.modifyVariation(enableOnPublicPages = "true");
	}

	@priority = "4"
	test MoveToTheRecycleBinAndRestorePublishTemplate {
		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.savePublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.viewPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.moveToTheRecycleBinPublishTemplate(publishTemplateName = "Publish Template Name");

		RecycleBin.openRecycleBinAdmin(siteURLKey = "site-name-staging");

		RecycleBin.viewCP(
			assetName = "Publish Template Name",
			assetType = "Export Import Template",
			deleteUser = "Test Test");

		RecycleBin.restoreCP(assetName = "Publish Template Name");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.viewPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");
	}

	@description = "This is a use case for LPS-128305."
	@priority = "3"
	test PublishContentPageWithDLReference {
		JSONDocument.addFileWithUploadedFile(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title",
			groupName = "Site Name-staging",
			mimeType = "image/jpeg",
			sourceFileName = "Document_1.jpg");

		DMNavigator.openDocumentsAndMediaAdmin(siteURLKey = "site-name-staging");

		DMNavigator.gotoDocumentCP(dmDocumentTitle = "DM Document Title");

		DMDocument.expandInfo();

		var dmDocumentURL = selenium.getAttribute("//input[contains(@id,'urlInput')]@value");

		JSONLayout.addPublicLayout(
			groupName = "Site Name (Staging)",
			layoutName = "Test Content Page Name",
			site = "false",
			type = "content");

		ContentPagesNavigator.openEditContentPage(
			pageName = "Test Content Page Name",
			siteURLKey = "site-name-staging");

		PageEditor.addFragment(
			collectionName = "Basic Components",
			fragmentName = "Paragraph");

		PageEditor.editFragmentText(
			fragmentName = "Paragraph",
			id = "element-text",
			text = "DL Image");

		PageEditor.addEntryWithLink(
			entryExternalURL = "${dmDocumentURL}",
			fragmentName = "Paragraph",
			id = "element-text");

		PageEditor.clickPublish();

		ContentPagesNavigator.openViewContentPage(
			pageName = "Test Content Page Name",
			siteName = "Site Name Staging");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		AssertConsoleTextNotPresent(value1 = "com.liferay.exportimport.kernel.lar.PortletDataException");

		AssertConsoleTextNotPresent(value1 = "org.json.JSONException");

		ContentPagesNavigator.openViewContentPage(
			pageName = "Test Content Page Name",
			siteName = "Site Name");

		ContentPages.viewFragmentText(
			fragmentName = "paragraph",
			id = "element-text",
			text = "DL Image");

		Click(
			key_append = "",
			key_url = "/Document_1.jpg",
			locator1 = "Fragment#FRAGMENT_LINK");

		AssertElementPresent(locator1 = "//img[contains(@src,'Document_1.jpg')]");
	}

	@priority = "5"
	test PublishPortlet {
		property portal.acceptance = "true";
		property testray.component.names = "Training";

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddCP();

		WebContent.addCP(
			webContentContent = "Web Content Content",
			webContentTitle = "Web Content Title");

		PortletEntry.publish();

		Staging.publishToLiveNowViaPortletCP();
	}

	@priority = "3"
	test PublishSiteTeams {
		Site.openSiteTeamsAdmin(siteURLKey = "site-name-staging");

		Team.addCP(
			teamDescription = "Site Team Description",
			teamName = "Site Team Name");

		Staging.publishToLiveNowViaPortletCP();

		Site.openSiteTeamsAdmin(siteURLKey = "site-name");

		Team.viewCP(
			teamDescription = "Site Team Description",
			teamName = "Site Team Name");
	}

	@priority = "5"
	test PublishThemeFromStagedToLive {
		property test.name.skip.portal.instance = "StagingUsecase#PublishThemeFromStagedToLive";

		FileInstall.deployFileOnServer(jarFile = "test-theme.war");

		WaitForConsoleTextPresent(value1 = "STARTED test-theme");

		JSONStaging.enableLocalStaging(
			branchingPrivate = "true",
			branchingPublic = "true",
			groupName = "Guest");

		Navigator.openStagingSiteURL(defaultSite = "true");

		Page.changeSinglePageTheme(themeName = "test-theme-7-4");

		Navigator.gotoBack();

		Button.clickPublish();

		Theme.viewTestThemeBackgroundColor();

		Navigator.openURL();

		Theme.viewClassicThemeBackgroundColor();

		Navigator.openStagingSiteURL(defaultSite = "true");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openURL();

		Theme.viewTestThemeBackgroundColor();
	}

	@description = "This is a use case for LPS-127207."
	@priority = "4"
	test PublishWebContentFolderWithChildFolders {
		JSONWebcontent.addFolder(
			folderDescription = "WC Folder Description",
			folderName = "WC Folder Name",
			groupName = "Site Name (Staging)",
			site = "false");

		for (var subfolderCount : list "1,2,3") {
			JSONWebcontent.addFolder(
				folderDescription = "WC SubFolder Description",
				folderName = "WC SubFolder Name ${subfolderCount}",
				groupName = "Site Name (Staging)",
				parentFolderName = "WC Folder Name",
				site = "false");
		}

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		Staging.publishViaSAP(
			confirmMessage = "Are you sure you want to publish the selected folder?",
			entry = "WC Folder Name");

		AssertConsoleTextNotPresent(value1 = "java.lang.OutOfMemoryError");
	}

	@priority = "3"
	test PublishWebContentFriendlyURLEncoding {
		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddCP();

		WebContent.addWithFriendlyURL(
			friendlyURL = '''disclaimer-f%25c3%25bcr-fonds''',
			webContentContent = "Web Content Content1",
			webContentTitle = "Web Content Title1");

		WebContentNavigator.gotoAddCP();

		WebContent.addWithFriendlyURL(
			friendlyURL = '''disclaimer-f%C3%BCr-fonds''',
			webContentContent = "Web Content Content2",
			webContentTitle = "Web Content Title2");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.publishCustomPublication();

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "Web Content Title1");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "Web Content Title2");
	}

	@description = "This is a use case for LPS-82757."
	@priority = "3"
	test PublishWebContentWithFeeds {
		property test.name.skip.portal.instance = "StagingUsecase#PublishWebContentWithFeeds";
		property testray.component.names = "Web Content Administration";

		SystemSettings.openSystemSettingsAdmin();

		SystemSettings.gotoConfiguration(
			configurationCategory = "Web Content",
			configurationName = "Administration",
			configurationScope = "System Scope");

		FormFields.enableCheckbox(fieldName = "Show Feeds");

		SystemSettings.saveConfiguration();

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Asset Publisher");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoFeeds();

		WebContentFeeds.addCP(
			feedTitle = "Web Content Feed",
			pageFriendlyURL = "/web/site-name-staging/staging-test-page",
			structureName = "Basic Web Content");

		WebContentFeeds.viewTableEntryCP(feedName = "Web Content Feed");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		NavItem.gotoFeeds();

		WebContentFeeds.viewTableEntryCP(feedName = "Web Content Feed");

		JSONLayout.addPublicLayout(
			groupName = "Site Name (Staging)",
			layoutName = "Second Page",
			site = "false");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Second Page",
			site = "false",
			widgetName = "Web Content Display");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoFeeds();

		WebContentNavigator.gotoEditFeed(feedName = "Web Content Feed");

		var webContentFeedURL = selenium.getAttribute("//a[contains(@href,'rss') and contains(.,'Preview')]@href");
		var stagingFeedId = StringUtil.extractLast("${webContentFeedURL}", "/");
		var entryExternalURL = StringUtil.replace("${webContentFeedURL}", "http://", "");

		echo("## * Staging FeedId: ${stagingFeedId}");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddCP();

		PortletEntry.inputTitle(title = "Web Content Title");

		CKEditor.addEntryExternalURL(
			displayText = "${webContentFeedURL}",
			entryExternalURL = "${entryExternalURL}",
			fieldLabel = "content");

		Button.clickPublish();

		VerifyElementPresent(locator1 = "Message#SUCCESS");

		Navigator.gotoStagedSitePage(
			pageName = "Second Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.selectWebContent(webContentTitle = "Web Content Title");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Second Page",
			siteName = "Site Name");

		var webContentFeedURL = selenium.getAttribute("//div[contains(@class,'journal-content-article')]//a[contains(@href,'rss')]@href");
		var liveFeedId = StringUtil.extractLast("${webContentFeedURL}", "/");

		echo("## * Live FeedId: ${liveFeedId}");

		if ("${liveFeedId}" == "${stagingFeedId}") {
			fail("The feedID should be different in live site.");
		}
	}

	@description = "This is a use case for LPS-84418 and LPS-117578."
	@priority = "5"
	test PublishWithImpossibleDateRange {
		property portal.acceptance = "true";

		Navigator.openStagingSiteURL(siteName = "Site Name");

		Staging.addRepeatEvent(
			failureExpected = "true",
			frequency = "Monthly",
			scheduleTitleName = "Event Monthly Name");
	}

	@priority = "4"
	test RemoveTagsFromPublishBlogAndDM {
		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Blogs");

		JSONBlog.addEntry(
			assetTagNames = "stagingtag",
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title",
			groupName = "Site Name (Staging)",
			site = "false");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Documents and Media");

		JSONDocument.addFileWithUploadedFile(
			assetTagNames = "stagingtag",
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title",
			groupName = "Site Name-staging",
			mimeType = "application/msword",
			sourceFileName = "Document_1.doc");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		BlogsNavigator.gotoEntryPG(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		BlogsEntry.viewTagPG(
			entryTitle = "Blogs Entry Title",
			tagName = "stagingtag");

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		DMNavigator.gotoDocumentPG(dmDocumentTitle = "DM Document Title");

		DMDocument.viewTagInfo(tagName = "stagingtag");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Tag.tearDownCP(
			site = "Site Name",
			stagingSite = "true");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		BlogsNavigator.gotoEntryPG(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		BlogsEntry.viewNoTag(
			entryTitle = "Blogs Entry Title",
			tagName = "stagingtag");

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		DMNavigator.gotoDocumentPG(dmDocumentTitle = "DM Document Title");

		DMDocument.viewNoTagInfo(tagName = "stagingtag");
	}

	@priority = "4"
	test SearchPublishTemplate {
		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "First Template");

		Staging.savePublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "First Template");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addPublishTemplate(
			publishTemplateDescription = "Publish Template Description 2",
			publishTemplateName = "Second Template");

		Staging.savePublishTemplate(
			publishTemplateDescription = "Publish Template Description 2",
			publishTemplateName = "Second Template");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.searchPublishTemplate(searchTerm = "Second");
	}

	@description = "This is a use case for LPS-82028."
	@priority = "4"
	test SingleAssetPublishLayoutScopedContent {
		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Blogs");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Portlet.selectScopePG(
			portletName = "Blogs",
			scope = "Staging Test Page");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		ProductMenu.gotoScopedPortlet(
			category = "Content & Data",
			portlet = "Blogs",
			scope = "Staging Test Page");

		Blogs.addEntry(
			entryContent = "Blogs Entry Content",
			entryTitle = "Blogs Entry Title");

		Click(
			key_rowEntry = "Blogs Entry Title",
			locator1 = "Icon#ROW_VERTICAL_ELLIPSIS");

		MenuItem.viewNotPresent(menuItem = "Publish to Live");
	}

	@description = "This test covers LPS-92578. It ensures that DM succeeds to publish to live when file exists in the recycle bin."
	@priority = "4"
	test SinglePublicationAfterDeleteDocument {
		JSONDocument.addFileWithUploadedFile(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "Document_2.jpg",
			groupName = "Site Name-staging",
			mimeType = "image/jpeg",
			sourceFileName = "Document_2.jpg");

		DMNavigator.openDocumentsAndMediaAdmin(siteURLKey = "site-name-staging");

		DMDocument.deleteCP(dmDocumentTitle = "Document_2.jpg");

		RecycleBin.openRecycleBinAdmin(siteURLKey = "site-name-staging");

		RecycleBin.viewCP(
			assetName = "Document_2.jpg",
			assetType = "Document",
			deleteUser = "Test Test");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		AssertConsoleTextNotPresent(value1 = "java.lang.NullPointerException");
	}

	@description = "This is a use case for LPS-82689."
	@priority = "3"
	test StagingPublishAssetPublisherConfiguredTagsFilter {
		Tag.openTagsAdmin(siteURLKey = "site-name-staging");

		Tag.addCP(tagName = "tag1");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Asset Publisher");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.configureTagsFilterPG(
			queryAndOperator = "Any",
			tagNameList = "tag1");

		JSONWebcontent.addWebContent(
			assetTagNames = "tag1",
			content = "Web Content With Tag1",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "Web Content Title 1");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		WebContent.viewPGViaAP(
			webContentContent = "Web Content With Tag1",
			webContentTitle = "Web Content Title 1");

		Tag.openTagsAdmin(siteURLKey = "site-name-staging");

		Tag.addCP(tagName = "tag2");

		JSONWebcontent.addWebContent(
			assetTagNames = "tag1,tag2",
			content = "Web Content With Tag1 and Tag2",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "Web Content Title 2");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.configureTagsFilterPG(
			queryAndOperator = "All",
			tagNameList = "tag1,tag2");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		WebContent.viewPGViaAP(
			webContentContent = "Web Content With Tag1 and Tag2",
			webContentTitle = "Web Content Title 2");
	}

	@priority = "4"
	test StagingPublishChildSiteWithReference {
		JSONWebcontent.addWebContent(
			content = "Web Content Content",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "Web Content Title");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		JSONGroup.addChildGroup(
			groupName = "Child Site",
			parentGroupName = "Site Name");

		JSONLayout.addPublicLayout(
			groupName = "Child Site",
			layoutName = "Page 1",
			parentGroupName = "Site Name");

		JSONLayout.addWidgetToPublicLayout(
			groupName = "Child Site",
			layoutName = "Page 1",
			parentGroupName = "Site Name",
			widgetName = "Asset Publisher");

		Navigator.gotoSitePage(
			pageName = "Page 1",
			siteName = "Child Site");

		AssetPublisherPortlet.configureSiteScopePG(
			siteName = "Site Name",
			siteScopeType = "Parent Site");

		Navigator.gotoSitePage(
			pageName = "Page 1",
			siteName = "Child Site");

		AssetPublisherPortlet.configureSiteScopeRemoveSitePG(
			siteName = "Child Site",
			siteScopeType = "Current Site");

		Staging.openStagingAdmin(siteURLKey = "child-site");

		Staging.activateStagingCP(siteName = "Child Site");
	}

	@priority = "4"
	test StagingPublishOnlySelectedPage {
		for (var layoutName : list "Page 1,Page 2,Page 3") {
			JSONLayout.addPublicLayout(
				groupName = "Site Name (Staging)",
				layoutName = "${layoutName}",
				site = "false");
		}

		Navigator.openStagingSiteURL(siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(checkPageName = "Page 2");

		Staging.publishToLive();

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Page.viewSpecificPG(pageNameList = "Page 2");

		Page.viewNoPG(pageName = "Page 1");

		Page.viewNoPG(pageName = "Page 3");
	}

	@description = "This is a use case for LPS-91017, LPS-89646."
	@priority = "4"
	test StagingPublishWCWithWebContentFieldViaAP {
		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Asset Publisher");

		JSONWebcontent.addWebContent(
			content = "WC WebContent Content",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "WC WebContent Title");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoStructures();

		WebContentStructures.addCP(
			structureDescription = "Structure Description",
			structureName = "Structure Name");

		DataEngine.addField(
			fieldFieldLabel = "Web Content",
			fieldName = "Web Content");

		WebContentStructures.saveCP(structureName = "Structure Name");

		NavItem.gotoTemplates();

		WebContentTemplates.addCP(
			structureName = "Structure Name",
			templateDescription = "Template Description",
			templateFieldNames = "Web Content",
			templateName = "Template Name");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddWithStructureCP(structureName = "Structure Name");

		WebContent.addWithStructureCP(
			description = "WC WebContent 1 Description",
			webContentTitle = "WC WebContent 1 Title",
			webContentWebContent = "WC WebContent Title");

		PortletEntry.publish();

		WebContent.viewTitle(webContentTitle = "WC WebContent 1 Title");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		AssetPublisherPortlet.viewAssetPG(
			assetContent = "WC WebContent 1 Description",
			assetTitle = "WC WebContent 1 Title");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		AssetPublisherPortlet.viewAssetPG(
			assetContent = "WC WebContent 1 Description",
			assetTitle = "WC WebContent 1 Title");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "WC WebContent Title");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "WC WebContent 1 Title");
	}

	@priority = "4"
	test StagingWithPublishTemplateSmoke {
		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Web Content Display");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.add(
			webContentContent = "Web Content Content",
			webContentTitle = "Web Content Title");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "Web Content Content",
			webContentTitle = "Web Content Title");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.savePublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLivePublishTemplate(
			publishTemplateName = "Publish Template Name",
			siteName = "Site Name");

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "Web Content Content",
			webContentTitle = "Web Content Title");
	}

	@description = "This is a use case for LPS-98473."
	@priority = "3"
	test SubscribeWebContentWithStaging {
		JSONGroup.addGroup(groupName = "Test Site");

		JSONRole.addRegularRole(
			roleKey = "Web Content Subscriber Role",
			roleTitle = "Web Content Subscriber Role");

		for (var resourceActionIndex : list "VIEW,SUBSCRIBE") {
			Permissions.definePermissionViaJSONAPI(
				resourceAction = "${resourceActionIndex}",
				resourceName = "com.liferay.journal",
				roleTitle = "Web Content Subscriber Role");
		}

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "SUBSCRIBE",
			resourceName = "com.liferay.journal.model.JournalFolder",
			roleTitle = "Web Content Subscriber Role");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "ACCESS_IN_CONTROL_PANEL",
			resourceName = "com_liferay_journal_web_portlet_JournalPortlet",
			roleTitle = "Web Content Subscriber Role");

		JSONUser.addUser(
			userEmailAddress = "userea@liferay.com",
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn");

		JSONRole.assignRoleToUser(
			roleTitle = "Web Content Subscriber Role",
			userEmailAddress = "userea@liferay.com");

		JSONGroup.assignUserToGroup(
			groupName = "Test Site",
			userEmailAddress = "userea@liferay.com");

		JSONStaging.assignUserToStagingGroup(
			groupKey = "Site Name-staging",
			userEmailAddress = "userea@liferay.com");

		User.logoutPG();

		User.loginPG(
			password = "test",
			userEmailAddress = "userea@liferay.com");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "test-site");

		WebContent.subscribeToCurrentFolderCP();

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContent.subscribeToCurrentFolderCP();
	}

	@description = "This is a use case for LPS-123156"
	@priority = "5"
	test TrashEntryReferencePublishing {
		property portal.acceptance = "true";
		property test.name.skip.portal.instance = "StagingUsecase#TrashEntryReferencePublishing";
		property testray.component.names = "Training";

		JSONDocument.addFileWithUploadedFile(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title",
			groupName = "Site Name-staging",
			mimeType = "image/jpeg",
			sourceFileName = "Document_1.jpg");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddCP();

		WebContent.addWithDocumentCP(
			dmDocumentTitle = "DM Document Title",
			webContentContent = "Web Content Content",
			webContentTitle = "Web Content Title");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Web Content Display");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.selectWebContent(
			portletName = "Web Content Display",
			webContentTitle = "Web Content Title");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Documents and Media");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(
			checkContentNameList = "Documents and Media",
			contentDateRange = "All");

		Staging.publishToLive();

		JSONDocument.deleteFile(
			dmDocumentTitle = "DM Document Title",
			groupName = "Site Name");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(
			contentDateRange = "All",
			mainContent = "Web Content",
			uncheckContentNameList = "Documents and Media",
			uncheckPages = "true",
			uncheckSubContent = "Referenced Content");

		Staging.publishToLive(
			failureExpected = "true",
			validateErrorMessage = "The publish process did not start due to validation errors.");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.configurePublishToLive(
			checkContentNameList = "Documents and Media",
			contentDateRange = "All");

		Staging.publishToLive();

		DMNavigator.openDocumentsAndMediaAdmin(siteURLKey = "site-name");

		DMDocument.viewPG(dmDocumentTitle = "DM Document Title");
	}

	@priority = "4"
	test ViewPublishDMWithModifiedTitle {
		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Asset Publisher");

		Navigator.openStagingSiteURL(siteName = "Site Name");

		DMDocument.addPGViaAP(
			dmDocumentDescription = "DM Document Description",
			dmDocumentFile = "Document_1.doc",
			dmDocumentTitle = "DM Document Title");

		Navigator.openStagingSiteURL(siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openStagingSiteURL(siteName = "Site Name");

		DMDocument.editPGViaAP(
			assetTitle = "DM Document Title",
			dmDocumentTitleEdit = "DM Document Title Edit",
			portletName = "Asset Publisher");

		Navigator.openStagingSiteURL(siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.openSiteURL(siteName = "Site Name");

		DMDocument.viewPGViaAP(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title Edit");
	}

	@description = "This is a use case for LPS-96721."
	@priority = "4"
	test ViewPublishedContentWithSpecialCharsInDocumentTitle {
		property test.name.skip.portal.instance = "Staging#ViewPublishedContentWithSpecialCharsInDocumentTitle";

		JSONDocument.addFileWithUploadedFile(
			dmDocumentTitle = '''example (“PDF”).pdf''',
			groupName = "Site Name-staging",
			mimeType = "application/pdf",
			sourceFileName = "Document_1.pdf");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoStructures();

		WebContentStructures.addCP(
			structureDescription = "Structure Description",
			structureName = "Structure Name");

		DataEngine.addField(
			fieldFieldLabel = "Upload",
			fieldName = "Upload");

		WebContentStructures.saveCP(structureName = "Structure Name");

		WebContentStructures.viewCP(
			structureDescription = "Structure Description",
			structureName = "Structure Name");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoTemplates();

		WebContentTemplates.addCP(
			structureName = "Structure Name",
			templateDescription = "Template Description",
			templateFieldNames = "Upload",
			templateName = "Template Name");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddWithStructureCP(structureName = "Structure Name");

		WebContent.addWithStructureCP(
			dmDocumentTitle = '''example (“PDF”).pdf''',
			dmNavTab = "Documents and Media",
			structureName = "Structure Name",
			templateName = "Template Name",
			webContentTitle = "WC WebContent Title",
			webContentUpload = '''example (“PDF”).pdf''');

		PortletEntry.publish();

		WebContent.viewTitle(webContentTitle = "WC WebContent Title");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Web Content Display");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.selectWebContent(webContentTitle = "WC WebContent Title");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		var downloadURL = selenium.getAttribute("//div[contains(@class,'journal-content-article')]/a@href");
		var stagingGroupId = StringUtil.extractLast("${downloadURL}", "documents/");
		var stagingGroupId = StringUtil.extractFirst("${stagingGroupId}", "/");

		echo("## * Staging GroupId: ${stagingGroupId}");

		Navigator.gotoSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		var downloadURL = selenium.getAttribute("//div[contains(@class,'journal-content-article')]/a@href");
		var liveGroupId = StringUtil.extractLast("${downloadURL}", "documents/");
		var liveGroupId = StringUtil.extractFirst("${liveGroupId}", "/");

		echo("## * Live GroupId: ${liveGroupId}");

		if ("${liveGroupId}" == "${stagingGroupId}") {
			fail("The groupID should be different in live site.");
		}
	}

	@description = "This is a use case for LPS-87280."
	@priority = "4"
	test ViewPublishedWCWithApostropheInImageField {
		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		NavItem.gotoStructures();

		WebContentStructures.addCP(
			structureDescription = "Structure Description",
			structureName = "Structure Name");

		DataEngine.addField(
			fieldFieldLabel = "Image",
			fieldName = "Image");

		DataEngine.editFieldRequired(fieldFieldLabel = "Image");

		WebContentStructures.saveCP(structureName = "Structure Name");

		NavItem.gotoTemplates();

		WebContentTemplates.addCP(
			structureName = "Structure Name",
			templateDescription = "Template Description",
			templateFieldNames = "Image",
			templateName = "Template Name");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		WebContentNavigator.gotoAddWithStructureCP(structureName = "Structure Name");

		WebContent.addWithStructureCP(
			navTab = "Web Content Images",
			structureName = "Structure Name",
			templateName = "Template Name",
			webContentImage = "Document_2.jpeg",
			webContentImageDescription = "this image doesn't work",
			webContentTitle = "WebContent Title");

		PortletEntry.publish();

		WebContent.viewTitle(webContentTitle = "WebContent Title");

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Site Name (Staging)",
			layoutName = "Staging Test Page",
			site = "false",
			widgetName = "Web Content Display");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.selectWebContent(webContentTitle = "WebContent Title");

		Navigator.gotoStagedSitePage(
			pageName = "Staging Test Page",
			siteName = "Site Name");

		WebContentDisplayPortlet.viewContent(
			imageFileName = "Document_2.jpeg",
			webContentTitle = "WebContent Title");

		Staging.gotoPublishToLive();

		Staging.publishToLive();

		AssertConsoleTextNotPresent(value1 = "Invalid XPath expression");

		Navigator.openSiteURL(siteName = "Site Name");

		WebContentDisplayPortlet.viewContent(
			imageFileName = "Document_2.jpeg",
			webContentTitle = "WebContent Title");
	}

	@description = "This is a use case for LPS-96664."
	@priority = "3"
	test ViewPublishTemplateDateRange {
		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.addPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.configurePublishToLive(
			contentDateRange = "Date Range",
			dateRangeEndDate = '''10/12/2019''',
			dateRangeStartDate = '''10/11/2019''');

		Staging.savePublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		Staging.openStagingAdmin(siteURLKey = "site-name-staging");

		Staging.viewPublishTemplate(
			publishTemplateDescription = "Publish Template Description",
			publishTemplateName = "Publish Template Name");

		AssertClick(
			key_publishTemplateName = "Publish Template Name",
			locator1 = "StagingPublishToLive#PUBLISH_TEMPLATES_TABLE_NAME",
			value1 = "Publish Template Name");

		Staging.viewDateRange(
			dateRangeEndDate = '''10/12/2019''',
			dateRangeStartDate = '''10/11/2019''');
	}

	@description = "This is a use case for LPS-76633."
	@priority = "5"
	test ViewSingleAssetPublication {
		property portal.release = "false";
		property test.name.skip.portal.instance = "Staging#ViewSingleAssetPublication";

		JSONWebcontent.addWebContent(
			content = "Web Content Content",
			groupName = "Site Name (Staging)",
			site = "false",
			title = "Web Content Title");

		JSONBookmarks.addBookmarks(
			description = "This is a test bookmark",
			groupName = "Site Name (Staging)",
			name = "Test Bookmark",
			site = "false",
			url = "https://www.liferay.com");

		JSONDocument.addFileWithUploadedFile(
			dmDocumentDescription = "DM Document Description",
			dmDocumentTitle = "DM Document Title",
			groupName = "Site Name-staging",
			mimeType = "image/jpeg",
			sourceFileName = "Document_1.jpg");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name-staging");

		Staging.publishViaSAP(
			confirmMessage = "Are you sure you want to publish the selected web content?",
			entry = "Web Content Title");

		Bookmark.openBookmarksAdmin(siteURLKey = "site-name-staging");

		Staging.publishViaSAP(
			confirmMessage = "Are you sure you want to publish to live?",
			entry = "Test Bookmark");

		DMNavigator.openDocumentsAndMediaAdmin(siteURLKey = "site-name-staging");

		Staging.publishViaSAP(
			confirmMessage = "Are you sure you want to publish the selected document?",
			entry = "DM Document Title");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "site-name");

		WebContent.viewTitle(
			onLive = "true",
			webContentTitle = "Web Content Title");

		Bookmark.openBookmarksAdmin(siteURLKey = "site-name");

		Bookmark.viewBookmark(
			bookmarkName = "Test Bookmark",
			bookmarkURL = "https://www.liferay.com");

		DMNavigator.openDocumentsAndMediaAdmin(siteURLKey = "site-name");

		DMNavigator.gotoDocumentCP(dmDocumentTitle = "DM Document Title");

		DMDocument.viewCP(dmDocumentTitle = "DM Document Title");
	}

}