@component-name = "portal-web-forms-and-data-lists"
definition {

	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Dynamic Data Lists";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			User.firstLoginPG();

			DDLTemplate.tearDownTemplateCP();

			DDLTemplate.tearDownTemplateCP(ddlDataDefinitionName = "Data Definition Clone With Form Template");

			DDLList.tearDownCP();

			DDLDataDefinition.tearDownCP();

			DMDocument.tearDownCP();

			JSONUser.tearDownNonAdminUsers();

			PagesAdmin.tearDownCP();

			Site.tearDownCP();
		}
	}

	@priority = "3"
	test AddDataDefinitionWithoutANameAndAssertErrorMessage {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DDLDataDefinition.clickSave();

		Alert.viewRequiredField();
	}

	@priority = "3"
	test AddListWithoutDataDefinitionAndAssertErrorMessage {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		LexiconEntry.gotoAdd();

		Type.clickAtType(
			locator1 = "TextInput#NAME",
			value1 = "List Name");

		Button.clickSave();

		Alert.viewRequestFailedToComplete();

		AssertTextEquals.assertPartialText(
			locator1 = "Message#ERROR_1",
			value1 = "Please enter a valid definition.");
	}

	@description = "This is a use case for LPS-50557."
	@ignore = "true"
	@priority = "4"
	test AddListWithXSSWorkflowDefinition {
		property test.name.skip.portal.instance = "DynamicdatalistUsecase#AddListWithXSSWorkflowDefinition";

		ApplicationsMenu.gotoPortlet(
			category = "Workflow",
			panel = "Applications",
			portlet = "Process Builder");

		Workflow.addNewDefinition(workflowDefinitionTitle = "New Uploaded Definition");

		ProcessBuilderKaleoDesignerReact.uploadDefinition(workflowDefinitionFile = "xss-workflow-definition.xml");

		ProcessBuilderKaleoDesignerReact.diagramSourceSwitchView();

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP();

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "To Do");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.viewCP();
	}

	@priority = "4"
	test AddRecord {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "DDL Definition Description",
			ddlDataDefinitionName = "DDL Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text Label",
			fieldName = "TextName");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(
			ddlListDescription = "DDL List Description",
			ddlListName = "DDL List");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "DDL Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "DDL Definition",
			ddlListName = "DDL List");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Record Text",
			fieldFieldLabel = "Text Label",
			fieldName = "TextName");

		PortletEntry.publish();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLList.selectViaDDLDisplayPG(ddlListName = "DDL List");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.addViaDDLDisplayPG(ddlDataDefinitionName = "DDL Definition");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Record Text",
			fieldFieldLabel = "Text Label",
			fieldName = "TextName");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords(ddlListName = "DDL List");

		DDLRecord.viewFirstFieldCP(
			ddlRecordFieldData = "Record Text",
			field = "Text",
			fieldFieldLabel = "Text Label",
			fieldName = "TextName");
	}

	@description = "This is a use case for LPS-51513."
	@priority = "3"
	test AddRecordBlankDateField {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Date",
			fieldFieldLabel = "Date",
			fieldName = "Date");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.viewCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.viewField(
			fieldFieldLabel = "Date",
			fieldName = "Date");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "List Name");

		DDLRecord.populateFieldDate(
			ddlRecordFieldData = "04/01/2017",
			fieldName = "Date");

		PortletEntry.publish();

		DDLRecord.viewFieldCP(
			ddlRecordFieldData = "4/1/2017",
			ddlRecordFieldData_1 = "4/1/17",
			field = "Date",
			fieldFieldLabel = "Date");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "List Name");

		DDLRecord.populateFieldDate(
			ddlRecordFieldData = "",
			fieldName = "Date");

		PortletEntry.publish();

		DDLRecord.viewFieldCP(
			ddlRecordFieldData = "4/1/2017",
			ddlRecordFieldData_1 = "4/1/17",
			field = "Date",
			fieldFieldLabel = "Date");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords(ddlListName = "List Name");

		DDLRecord.viewSecondFieldCP(
			ddlRecordFieldData = "",
			fieldFieldLabel = "Date");
	}

	@description = "This is a use case for LPS-66229."
	@priority = "3"
	test AddRecordWithBlankDocumentsAndMediaField {
		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "Data Definition Description",
			ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Documents and Media",
			fieldFieldLabel = "Documents and Media",
			fieldName = "DocumentsAndMedia");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "DDL Page");

		Navigator.gotoPage(pageName = "DDL Page");

		Portlet.addPG(
			pageName = "DDL Page",
			portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG();

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Data Definition");

		DDLList.saveViaDDLDisplayPG();

		Navigator.openURL();

		Navigator.gotoPage(pageName = "DDL Page");

		DDLRecord.addViaDDLDisplayPG();

		PortletEntry.publish();

		Navigator.gotoPage(pageName = "DDL Page");

		DDLRecord.viewViaDDLDisplayTable(
			ddlRecordFieldData = "",
			fieldFieldLabel = "Documents and Media");
	}

	@description = "This is a use case for LPS-66229."
	@priority = "3"
	test AddRecordWithBlankLinkToPageField {
		task ("Create a DDL containing a Link to Page") {
			ProductMenu.gotoPortlet(
				category = "Site Builder",
				portlet = "Pages");

			PagesAdmin.addPage(pageName = "Test Page");

			Navigator.openURL();

			ProductMenu.gotoPortlet(
				category = "Content & Data",
				portlet = "Dynamic Data Lists");

			DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

			DynamicDataMapping.addField(
				field = "Link to Page",
				fieldFieldLabel = "Link to Page",
				fieldName = "LinkToPage");

			DDLDataDefinition.save();
		}

		task ("Add the created DDL to the Test Page") {
			Navigator.openURL();

			Navigator.gotoPage(pageName = "Test Page");

			Portlet.addPG(
				pageName = "Test Page",
				portletName = "Dynamic Data Lists Display");

			DDLList.addViaDDLDisplayPG();

			DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Data Definition");

			DDLList.saveViaDDLDisplayPG();
		}

		task ("Assert that the blank link to page field was added") {
			Navigator.gotoPage(pageName = "Test Page");

			Click(locator1 = "DDLEditList#PORTLET_ADD_DATA_DEFINITION");

			PortletEntry.publish();

			Navigator.gotoPage(pageName = "Test Page");

			DDLRecord.viewViaDDLDisplayTable(
				ddlRecordFieldData = "",
				fieldFieldLabel = "Link to Page");
		}
	}

	@description = "This is a use case for LPS-66229."
	@ignore = "true"
	@priority = "3"
	test AddRecordWithBlankWebContentField {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "DDL Page");

		Navigator.gotoPage(pageName = "DDL Page");

		Portlet.addPG(
			pageName = "DDL Page",
			portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG();

		DDLDataDefinition.addViaDDLDisplayPG();

		DynamicDataMapping.addField(
			field = "Web Content",
			fieldFieldLabel = "Web Content",
			fieldName = "WebContent");

		DDLDataDefinition.saveViaDDLDisplayPG();

		DDLDataDefinition.selectViaDDLDisplayPG();

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "DDL Page");

		DDLRecord.addViaDDLDisplayPG();

		PortletEntry.publish();

		Navigator.gotoPage(pageName = "DDL Page");

		DDLRecord.viewViaDDLDisplayTable(
			ddlRecordFieldData = "",
			fieldFieldLabel = "Web Content");
	}

	@description = "This is a use case for LPS-66439."
	@ignore = "true"
	@priority = "5"
	test AddRecordWithPopulatedWebContentField {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Web Content");

		WebContentNavigator.gotoAddCP();

		WebContent.addCP(
			webContentContent = "WC WebContent Content",
			webContentTitle = "WC WebContent Title");

		PortletEntry.publish();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "DDL Page");

		Navigator.gotoPage(pageName = "DDL Page");

		Portlet.addPG(
			pageName = "DDL Page",
			portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG();

		DDLDataDefinition.addViaDDLDisplayPG();

		DynamicDataMapping.addField(
			field = "Web Content",
			fieldFieldLabel = "Web Content",
			fieldName = "WebContent");

		DDLDataDefinition.saveViaDDLDisplayPG();

		DDLDataDefinition.selectViaDDLDisplayPG();

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "DDL Page");

		DDLRecord.addViaDDLDisplayPG();

		DDLRecord.populateFieldWebContentChooseFromWebContentLibrary(
			fieldName = "WebContent",
			webContentTitle = "WC WebContent Title");

		PortletEntry.publish();

		Navigator.gotoPage(pageName = "DDL Page");

		DDLRecord.viewViaDDLDisplayPG(
			ddlRecordFieldData = "WC WebContent Title",
			fieldFieldLabel = "Web Content");
	}

	@description = "This is a use case for LPS-65069."
	@priority = "5"
	test AddRecordWithRepeatableTextField {
		property portal.acceptance = "quarantine";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP();

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.editFieldRepeatable(fieldFieldLabel = "Text");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP();

		DDLDataDefinition.selectCP();

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP();

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Content",
			fieldName = "Text");

		DDLRecord.viewTextFieldRepeated(
			ddlRecordFieldData1 = "Content",
			ddlRecordFieldData2 = "Content 2");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "DDL Page");

		Navigator.gotoPage(pageName = "DDL Page");

		Portlet.addPG(
			pageName = "DDL Page",
			portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG(ddlListName = "Dynamic Data List 2");

		DDLDataDefinition.selectViaDDLDisplayPG();

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "DDL Page");

		DDLRecord.addViaDDLDisplayPG();

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Content",
			fieldName = "Text");

		DDLRecord.viewTextFieldRepeated(
			ddlRecordFieldData1 = "Content",
			ddlRecordFieldData2 = "Content 2");

		PortletEntry.publish();
	}

	@priority = "4"
	test AddRepeatableFieldAndAssertOrderInTranslation {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.editFieldRepeatable(fieldFieldLabel = "Text");

		Form.addTranslation(localizedLanguage = "Spanish (Spain)");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "Dynamic Data List");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "Dynamic Data List");

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Content",
			fieldName = "Text");

		DDLRecord.saveAsDraftCP();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.editCP(
			ddlListName = "Dynamic Data List",
			ddlRecordFieldData = "Content, Content 2");

		PortletEntry.changeLocale(locale = "es-ES");

		DDLRecord.populateTranslationFieldText(
			ddlRecordFieldData = "Contenido",
			fieldName = "Text");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.editCP(
			ddlListName = "Dynamic Data List",
			ddlRecordFieldData = "Content, Content 2");

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Content",
			fieldName = "Text");

		PortletEntry.changeLocale(locale = "es-ES");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.editCP(
			ddlListName = "Dynamic Data List",
			ddlRecordFieldData = "Content, Content 2, Content 3");

		PortletEntry.changeLocale(locale = "es-ES");

		DDLRecord.viewTextFieldRepeated(
			ddlRecordFieldData1 = "Contenido",
			ddlRecordFieldData2 = "Content 2",
			ddlRecordFieldData3 = "Contenido 2");
	}

	@description = "This is a use case for LPS-69273."
	@priority = "4"
	test AddRepeatableFieldAsNonAdminUser {
		JSONRole.addRegularRole(
			roleKey = "DDMRegRole Name",
			roleTitle = "DDMRegRole Name");

		for (var resourceActionIndex : list "VIEW,ADD_RECORD") {
			Permissions.definePermissionViaJSONAPI(
				resourceAction = "${resourceActionIndex}",
				resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
				roleTitle = "DDMRegRole Name");
		}

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "VIEW_SITE_ADMINISTRATION",
			resourceName = "com.liferay.portal.kernel.model.Group",
			roleTitle = "DDMRegRole Name");

		for (var resourceActionIndex : list "VIEW,PREFERENCES,PERMISSIONS,CONFIGURATION,ACCESS_IN_CONTROL_PANEL") {
			Permissions.definePermissionViaJSONAPI(
				resourceAction = "${resourceActionIndex}",
				resourceName = "com_liferay_dynamic_data_lists_web_portlet_DDLPortlet",
				roleTitle = "DDMRegRole Name");
		}

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations");

		User.addCP(
			userEmailAddress = "userea1@liferay.com",
			userFirstName = "userfn1",
			userLastName = "userln1",
			userScreenName = "usersn1");

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations");

		User.editPasswordCP(
			userEmailAddress = "userea1@liferay.com",
			userScreenName = "usersn1");

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Roles");

		JSONRole.assignRoleToUser(
			roleTitle = "DDMRegRole Name",
			userEmailAddress = "userea1@liferay.com");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP();

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.editFieldRepeatable(fieldFieldLabel = "Text");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP();

		DDLDataDefinition.selectCP();

		DDLDataDefinition.save();

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea1@liferay.com",
			userLoginFullName = "userfn1 userln1");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP();

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Content",
			fieldName = "Text");

		DDLRecord.viewTextFieldRepeated(
			ddlRecordFieldData1 = "Content",
			ddlRecordFieldData2 = "Content 2");

		PortletEntry.publish();
	}

	@description = "This is a use case for LPS-68216."
	@priority = "4"
	test AddSelectFieldWithTranslationAndViewInSpreadsheetView {
		var portalURL = PropsUtil.get("portal.url");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Select",
			fieldFieldLabel = "SelectENG",
			fieldName = "Select");

		DynamicDataMapping.editFieldOptions(
			field = "Select",
			fieldFieldLabel = "SelectENG",
			fieldName = "Select",
			fieldOptionsNames = "ENGOption1",
			fieldOptionsValues = "Value 1");

		Form.addTranslation(localizedLanguage = "Japanese (Japan)");

		DynamicDataMapping.editField(
			field = "Select",
			fieldFieldLabel = "SelectENG",
			fieldFieldLabelEdit = "SelectJA");

		DynamicDataMapping.editFieldOptions(
			field = "Select",
			fieldFieldLabel = "SelectJA",
			fieldName = "Select",
			fieldOptionsNames = "JAOption1");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "DDL List");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "DDL List");

		DDLRecord.populateFieldSelect(
			ddlRecordFieldData = "ENGOption1",
			fieldFieldLabel = "SelectENG",
			fieldName = "Select");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		DDLList.selectViaDDLDisplayPG(ddlListName = "DDL List");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		DDLDisplayPortlet.configureListViewPG(
			configureCheckBoxName = "TEMPLATES_SPREADSHEET_VIEW_CHECKBOX",
			configureChecked = "true",
			ddlListName = "DDL List");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		DDLDisplayPortlet.viewFieldSelectViaSpreadsheetView(
			ddlRecordFieldData = "ENGOption1",
			ddlRecordRow = "1",
			fieldName = "Select");

		Navigator.openSpecificURL(url = "${portalURL}/ja/");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		DDLDisplayPortlet.viewFieldSelectViaSpreadsheetView(
			ddlRecordFieldData = "JAOption1",
			ddlRecordRow = "1",
			fieldName = "Select");
	}

	@description = "This is a use case for LPS-50549."
	@ignore = "true"
	@priority = "4"
	test AddXSSToHTMLField {
		var ddlRecordFieldData1 = '''<img src=x onerror=alert(/xss/) />''';

		var ddlRecordFieldData2 = ''''+alert('xss')+'"+alert("xss")+"''';

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP();

		DynamicDataMapping.addField(
			field = "HTML",
			fieldFieldLabel = "HTML",
			fieldName = "HTML");

		DynamicDataMapping.editFieldPredefinedValue(
			field = "HTML",
			fieldFieldLabel = "HTML",
			fieldName = "HTML",
			fieldPredefinedValue = "${ddlRecordFieldData2}");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.viewCP(fieldFieldLabel = "HTML");

		DynamicDataMapping.viewField(
			field = "HTML",
			fieldFieldLabel = "HTML",
			fieldName = "HTML");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP();

		DDLDataDefinition.selectCP();

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP();

		FormFields.editParagraphBody(content = "${ddlRecordFieldData1}");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords();

		DDLRecord.gotoRecordPreview();

		DDLRecord.viewInvalidHTMLfield();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.deleteCP(ddlRecordFieldData = "(Preview)");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP();

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords();

		DDLRecord.viewFirstFieldCP(
			ddlRecordFieldData = "${ddlRecordFieldData2}",
			field = "HTML",
			fieldFieldLabel = "HTML",
			fieldName = "HTML");
	}

	@priority = "2"
	test AssertConfigurationMenulist {
		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG(ddlListName = "List Name");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "To Do");

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLDisplayPortlet.configureListViewPG(
			configureCheckBoxName = "TEMPLATES_EDITABLE_CHECKBOX",
			configureChecked = "false",
			ddlListName = "List Name");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLDisplayPortlet.configureListViewPG(
			configureCheckBoxName = "TEMPLATES_SPREADSHEET_VIEW_CHECKBOX",
			ddlListName = "List Name");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLDisplayPortlet.assertCannotEditSpreadsheet();

		Portlet.viewPortletOptionsMenulist();
	}

	@priority = "3"
	test AssertDecimalFieldInvalidDataErrorMessage {
		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Decimal Invalid Value Data Definition Name");

		DynamicDataMapping.addField(
			field = "Decimal",
			fieldFieldLabel = "Decimal",
			fieldName = "Decimal");

		DDLDataDefinition.save();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLList.addViaDDLDisplayPG(ddlListName = "List Name");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Decimal Invalid Value Data Definition Name");

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.addViaDDLDisplayPG(
			ddlDataDefinitionName = "Decimal Invalid Value Data Definition Name",
			ddlListName = "List Name");

		var key_fieldName = "Decimal";

		Type(
			locator1 = "TextInput#DDM",
			value1 = "0.987a");

		AssertClick(
			locator1 = "Button#PUBLISH",
			value1 = "Publish");

		AssertTextEquals(
			locator1 = "DDLEditRecord#RECORD_FIELD_ALERT",
			value1 = "Please enter a valid number.");
	}

	@description = "This is a use case for LPS-48736."
	@priority = "3"
	test AssertFieldAfterNavigatingToManageTemplates {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition Title");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DDLDataDefinition.save();

		Search.searchCP(searchTerm = "Data Definition Title");

		Click.waitForMenuToggleJSClick(locator1 = "DDMSelectStructure#DDM_STRUCTURE_ELLIPSIS_1");

		MenuItem.click(menuItem = "Manage Templates");

		Click(locator1 = "Icon#ANGLE_LEFT_BACK");

		var key_ddlDataDefinitionName = "Data Definition Title";

		Click(
			locator1 = "DDMSelectStructure#DDM_STRUCTURE_TABLE_NAME_LINK",
			value1 = "Data Definition Title");

		AssertTextEquals(
			locator1 = "Portlet#HEADER",
			value1 = "Edit Data Definition Title");

		AssertTextEquals(
			locator1 = "TextInput#NAME",
			value1 = "Data Definition Title");

		DynamicDataMapping.viewField(
			fieldFieldLabel = "Text",
			fieldName = "Text");
	}

	@priority = "4"
	test AssertGuestCannotEditRecord {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "Data Definition Description",
			ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.addField(
			field = "Documents and Media",
			fieldFieldLabel = "Document",
			fieldName = "Document");

		Form.addTranslation(localizedLanguage = "Spanish (Spain)");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoDataDefinitionPermissions(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.editPermissionsCP(
			addOrRemoveViewPermission = "Add",
			roleList = "Guest");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG(
			ddlListDescription = "List Description",
			ddlListName = "List Name");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Data Definition");

		DDLList.saveViaDDLDisplayPG();

		Navigator.openURL();

		DDLList.editUserViewPermissionCP(
			addOrRemoveViewPermission = "Add",
			ddlListName = "List Name",
			roleList = "Guest");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.addViaDDLDisplayPG(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "List Name");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DDLRecord.populateFieldDocumentsAndMediaChooseFromDocumentLibrary(
			document = "Document_1.doc",
			fieldFieldLabel = "Document",
			fieldName = "Document");

		PortletEntry.publish();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLNavigator.gotoView();

		Pause(locator1 = "1000");

		var adminViewURL = Navigator.getCurrentURL(adminViewURL = "${adminViewURL}");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.editPG();

		Pause(locator1 = "1000");

		var adminEditURL = Navigator.getCurrentURL(adminEditURL = "${adminEditURL}");

		User.logoutPG();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.viewViaDDLDisplayPG(
			ddlRecordFieldData = "Text",
			ddlRecordFieldDataTableDisplay = "Text",
			fieldFieldLabel = "Text",
			userRole = "Guest");

		Portlet.viewCannotEdit();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.viewSecondRecordViaDDLDisplayTemplate(
			ddlRecordFieldData = "Document_1.doc",
			fieldFieldLabel = "Document");

		Portlet.viewCannotEdit();

		Navigator.openSpecificURL(url = "${adminEditURL}");

		PortletEntry.changeLocale(locale = "es-ES");

		Portlet.viewCannotPublish();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.openSpecificURL(url = "${adminEditURL}");

		DDLRecord.viewTranslationNotAvailable(localizedLanguage = "Spanish (Spain)");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text Edit",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		Portlet.viewCannotPublish();

		Navigator.openSpecificURL(url = "${adminEditURL}");

		DDLRecord.clearFieldDocumentsAndMedia(fieldName = "Document");

		Portlet.viewCannotPublish();

		Navigator.openSpecificURL(url = "${adminEditURL}");

		Portlet.viewCannotSaveAsDraft();
	}

	@priority = "3"
	test AssertIntegerFieldInvalidDataErrorMessage {
		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Integer Invalid Value Data Definition Name");

		DynamicDataMapping.addField(
			field = "Integer",
			fieldFieldLabel = "Integer",
			fieldName = "Integer");

		DDLDataDefinition.save();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLList.addViaDDLDisplayPG(ddlListName = "List Name");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Integer Invalid Value Data Definition Name");

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.addViaDDLDisplayPG(
			ddlDataDefinitionName = "Integer Invalid Value Data Definition Name",
			ddlListName = "List Name");

		var key_fieldName = "Integer";

		Type(
			locator1 = "TextInput#DDM",
			value1 = "aaaa");

		AssertClick(
			locator1 = "Button#PUBLISH",
			value1 = "Publish");

		AssertTextEquals(
			locator1 = "DDLEditRecord#RECORD_FIELD_ALERT",
			value1 = "Please enter only digits.");
	}

	@priority = "4"
	test AssertNumberFieldInvalidDataErrorMessage {
		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Number Predefined Value Data Definition Name");

		DynamicDataMapping.addField(
			field = "Number",
			fieldFieldLabel = "Number",
			fieldName = "Number");

		DDLDataDefinition.save();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLList.addViaDDLDisplayPG(ddlListName = "List Name");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Number Predefined Value Data Definition Name");

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.addViaDDLDisplayPG(
			ddlDataDefinitionName = "Number Predefined Value Data Definition Name",
			ddlListName = "List Name");

		var key_fieldName = "Number";

		Type(
			locator1 = "TextInput#DDM",
			value1 = "555b");

		AssertClick(
			locator1 = "Button#PUBLISH",
			value1 = "Publish");

		AssertTextEquals(
			locator1 = "DDLEditRecord#RECORD_FIELD_ALERT",
			value1 = "Please enter a valid number.");
	}

	@priority = "4"
	test AssertUserCannotDeleteEntryAfterPermissionRemoved {
		var siteName = TestCase.getSiteName(siteName = "${siteName}");

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations");

		User.addCP(
			userEmailAddress = "userea1@liferay.com",
			userFirstName = "userfn1",
			userLastName = "userln1",
			userScreenName = "usersn1");

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations");

		User.editPasswordCP(
			userEmailAddress = "userea1@liferay.com",
			userScreenName = "usersn1");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "Data Definition Description",
			ddlDataDefinitionName = "Data Definition Name");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DDLDataDefinition.save();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		Refresh();

		PagesAdmin.addPage(pageName = "Data Definition Page Name");

		Navigator.gotoPage(pageName = "Data Definition Page Name");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG(
			ddlListDescription = "DDL List Description",
			ddlListName = "DDL List Name");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Data Definition Name");

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "Data Definition Page Name");

		DDLRecord.addViaDDLDisplayPG(
			ddlDataDefinitionName = "Data Definition Name",
			ddlListName = "DDL List Name");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.editPermissions(ddlListName = "DDL List Name");

		Role.definePermissionPG(
			permissionDefinitionKey = "CONTENT_PERMISSIONS_DELETE_CHECKBOX",
			roleTitle = "Guest");

		Navigator.gotoPage(pageName = "Data Definition Page Name");

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations");

		User.impersonateCP(
			siteName = "${siteName}",
			userScreenName = "usersn1");

		Navigator._gotoPage(pageName = "Data Definition Page Name");

		Alert.viewErrorMessage(errorMessage = "You do not have the required permissions.");

		Navigator.closeSpecificWindow(
			closeWindowTitle = "Data Definition Page Name - ${siteName}",
			selectWindowTitle = "Users and Organizations - ${siteName}");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.editPermissions(ddlListName = "DDL List Name");

		Role.removePermissionPG(
			permissionDefinitionKey = "CONTENT_PERMISSIONS_DELETE_CHECKBOX",
			roleTitle = "Guest");

		Navigator.gotoPage(pageName = "Data Definition Page Name");

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations");

		User.impersonateCP(
			siteName = "${siteName}",
			userScreenName = "usersn1");

		Navigator._gotoPage(pageName = "Data Definition Page Name");

		Alert.viewErrorMessage(errorMessage = "You do not have the required permissions.");
	}

	@priority = "4"
	test AssertUserUpdateRejectedRecord {
		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG(
			ddlListName = "DDL List",
			workflowDefinition = "Single Approver");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "To Do");

		DDLList.saveViaDDLDisplayPG();

		Navigator.openURL();

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "ADD_RECORD",
			resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
			roleTitle = "User");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "VIEW",
			resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
			roleTitle = "User");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "UPDATE",
			resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
			roleTitle = "User");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "ACCESS_IN_CONTROL_PANEL",
			resourceName = "90",
			roleTitle = "User");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "ACCESS_IN_CONTROL_PANEL",
			resourceName = "com_liferay_portal_workflow_task_web_portlet_MyWorkflowTaskPortlet",
			roleTitle = "User");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "VIEW",
			resourceName = "com_liferay_portal_workflow_task_web_portlet_MyWorkflowTaskPortlet",
			roleTitle = "User");

		JSONUser.addUser(
			userEmailAddress = "userea@liferay.com",
			userFirstName = "userfn",
			userLastName = "userln",
			userScreenName = "usersn");

		ApplicationsMenu.gotoPortlet(
			category = "Users",
			panel = "Control Panel",
			portlet = "Users and Organizations");

		User.editPasswordCP(
			userEmailAddress = "userea@liferay.com",
			userScreenName = "usersn");

		User.logoutPG();

		User.loginUserPG(
			password = "test",
			userEmailAddress = "userea@liferay.com");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.addViaDDLDisplayPG(ddlDataDefinitionName = "To Do");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "DDL Record Title",
			fieldFieldLabel = "Title",
			fieldName = "title");

		DDLRecord.submitForPublication();

		User.logoutPG();

		User.loginUserPG(
			password = "test",
			userEmailAddress = "test@liferay.com");

		UserBar.gotoDropdownItem(dropdownItem = "My Workflow Tasks");

		Workflow.assignToMeTaskByActions(
			ddlDataDefinitionName = "To Do",
			workflowAssetTitle = "New To Do for List: DDL List",
			workflowAssetType = "Dynamic Data Lists Record",
			workflowTask = "Review");

		UserBar.gotoDropdownItem(dropdownItem = "My Workflow Tasks");

		Workflow.rejectTaskByActions(
			ddlDataDefinitionName = "To Do",
			workflowAssetTitle = "New To Do for List: DDL List",
			workflowAssetType = "Dynamic Data Lists Record",
			workflowTask = "Review");

		User.logoutPG();

		User.loginUserPG(
			password = "test",
			userEmailAddress = "userea@liferay.com");

		UserBar.gotoDropdownItem(dropdownItem = "My Workflow Tasks");

		Workflow.viewRejectedTask(
			ddlDataDefinitionName = "To Do",
			workflowAssetTitle = "New To Do for List: DDL List",
			workflowAssetType = "Dynamic Data Lists Record");

		Workflow.viewTaskAssignedToMeDetails(
			workflowAssetContent = "DDL Record Title",
			workflowAssetTitle = "New To Do for List: DDL List",
			workflowAssignedTo = "userfn userln",
			workflowTask = "Update");

		DDLNavigator.gotoDDLRecordEditViaWorkflow(workflowStatus = "PENDING (UPDATE)");

		User.logoutPG();

		User.loginUserPG(
			password = "test",
			userEmailAddress = "test@liferay.com");
	}

	@description = "This is a use case for LPS-50557."
	@priority = "3"
	test CreateSiteAndViewDefaultDataDefinitions {
		ApplicationsMenu.gotoPortlet(
			category = "Sites",
			panel = "Control Panel",
			portlet = "Sites");

		Site.addBlankCP(siteName = "Site Name");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoManageDataDefinitions();

		for (var ddlDataDefinitionName : list "Contacts,Events,Inventory,Issues Tracking,Meeting Minutes,To Do") {
			DDLDataDefinition.viewName(ddlDataDefinitionName = "${ddlDataDefinitionName}");
		}
	}

	@priority = "3"
	test DeleteStructure {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "DDL Definition Description",
			ddlDataDefinitionName = "DDL Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text Label",
			fieldName = "TextName");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(
			ddlListDescription = "DDL List Description",
			ddlListName = "DDL List");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "DDL Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "DDL Definition",
			ddlListName = "DDL List");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Record Text",
			fieldFieldLabel = "Text Label",
			fieldName = "TextName");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.deleteNoCP(ddlDataDefinitionName = "DDL Definition");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.deleteCP(ddlListName = "DDL List");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.deleteCP(ddlDataDefinitionName = "DDL Definition");
	}

	@description = "This is a use case for LPS-59154 and LPS-62523."
	@priority = "3"
	test EditDefaultLanguageAndPublishRecord {
		property test.name.skip.portal.instance = "DynamicdatalistUsecase#EditDefaultLanguageAndPublishRecord";

		Navigator.openURL();

		PortalSettings.gotoConfiguration(
			configurationCategory = "Localization",
			configurationName = "Language",
			configurationScope = "Virtual Instance Scope");

		PortalSettings.setCurrentInstanceLanguageCP(newLanguage = "Spanish (Spain)");

		var siteName = TestCase.getSiteName(siteName = "${siteName}");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists",
			site = "${siteName}");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		Form.addTranslation(localizedLanguage = "English (United States)");

		Form.addTranslation(localizedLanguage = "Chinese (China)");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists",
			site = "${siteName}");

		DDLList.addCP(ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists",
			site = "${siteName}");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "List Name");

		PortletEntry.viewLocale(locale = "es-ES");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text Spanish",
			fieldName = "Text");

		PortletEntry.publish();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists",
			site = "${siteName}");

		DDLRecord.editCP(
			ddlListName = "List Name",
			ddlRecordFieldData = "Text Spanish");

		PortletEntry.changeLocale(locale = "en-US");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text English",
			fieldName = "Text");

		PortletEntry.publish();

		DDLRecord.viewFieldCP(
			ddlRecordFieldData = "Text English",
			fieldFieldLabel = "Text");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists",
			site = "${siteName}");

		DDLRecord.editCP(
			ddlListName = "List Name",
			ddlRecordFieldData = "Text English");

		PortletEntry.changeLocale(locale = "zh-CN");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text Chinese",
			fieldName = "Text");

		PortletEntry.publish();

		DDLRecord.viewFieldCP(
			ddlRecordFieldData = "Text English",
			fieldFieldLabel = "Text");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages",
			site = "${siteName}");

		PagesAdmin.addPage(pageName = "Dynamic Data Lists Display Page");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG(ddlListName = "List Name Display");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Data Definition");

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.addViaDDLDisplayPG(ddlDataDefinitionName = "Data Definition");

		PortletEntry.viewLocale(locale = "es-ES");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text es-ES",
			fieldName = "Text");

		PortletEntry.changeLocale(locale = "en-US");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text English",
			fieldName = "Text");

		PortletEntry.publish();

		DDLRecord.viewViaDDLDisplayPG(
			ddlListName = "List Name Display",
			ddlRecordFieldData = "Text English",
			fieldFieldLabel = "Text");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Display Page");

		DDLRecord.editPG();

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "remove",
			fieldName = "Text");

		PortletEntry.changeLocale(locale = "zh-CN");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text Chinese",
			fieldName = "Text");

		PortletEntry.publish();

		DDLRecord.viewViaDDLDisplayPG(
			ddlListName = "List Name Display",
			ddlRecordFieldData = "remove",
			fieldFieldLabel = "Text");

		PortalSettings.setCurrentInstanceLanguageCP(newLanguage = "English (United States)");
	}

	@description = "This is a use case for LPS-59272."
	@priority = "3"
	test EditListRecordWithNestedFieldViaSpreadsheetView {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition Name");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.addFieldNested(
			field = "Select",
			fieldFieldLabel = "Select",
			fieldName = "Select");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(
			ddlListDescription = "List Description",
			ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition Name");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition Name",
			ddlListName = "List Name");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text",
			fieldName = "Text");

		DDLRecord.populateFieldSelect(
			ddlRecordFieldData = "option 1",
			fieldName = "Select");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoSpreadsheetView(ddlListName = "List Name");

		DDLRecord.populateFieldTextViaSpreadsheetView(
			ddlRecordFieldData = "Text Edit",
			ddlRecordRow = "1",
			fieldName = "Text");

		DDLRecord.populateFieldSelectViaSpreadsheetView(
			ddlRecordFieldData = "option 2",
			ddlRecordRow = "1",
			fieldName = "Select");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.viewCP(ddlListName = "List Name");

		DDLRecord.viewFieldCP(
			ddlRecordFieldData = "Text Edit",
			ddlRecordNestedFieldData = "option 2",
			fieldFieldLabel = "Text",
			nestedFieldFieldLabel = "Select");
	}

	@priority = "4"
	test FormTemplateUniqueField {
		task ("Create a Data Definition containing a boolean field and a text field") {
			ProductMenu.gotoPortlet(
				category = "Content & Data",
				portlet = "Dynamic Data Lists");

			DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

			DynamicDataMapping.addField(
				field = "Boolean",
				fieldFieldLabel = "Boolean",
				fieldName = "Boolean");

			DynamicDataMapping.addField(
				field = "Text",
				fieldFieldLabel = "Text",
				fieldName = "Text");

			DDLDataDefinition.save();
		}

		task ("Go to Manage Templates of the created Data Definition") {
			ProductMenu.gotoPortlet(
				category = "Content & Data",
				portlet = "Dynamic Data Lists");

			DDLNavigator.gotoManageDataDefinitions();

			var key_ddlDataDefinitionName = "Data Definition";

			Click.waitForMenuToggleJSClick(locator1 = "DDMSelectStructure#DDM_STRUCTURE_ELLIPSIS");

			MenuItem.clickNoError(menuItem = "Manage Templates");

			ClickNoError(
				ariaLabel = "New",
				locator1 = "Button#ANY_WITH_ARIA_LABEL");

			MenuItem.clickNoError(menuItem = "Add Form Template");

			Type.clickAtType(
				locator1 = "TextInput#NAME",
				value1 = "Form Template Name");
		}

		task ("Assert that boolean field and text field can't be added, as they're present") {
			DynamicDataMapping.viewCannotAddField(field = "Boolean");

			DynamicDataMapping.viewCannotAddField(field = "Text");
		}

		task ("Delete the boolean field and assert that it can be added again") {
			MouseOver(
				key_text = "Boolean",
				locator1 = "DDMEditStructure#FORM_FIELD_CONTAINER_TEXT");

			Click.mouseOverClick(locator1 = "DDMEditStructure#FORM_FIELD_DELETE_BUTTON_2");

			AssertTextEquals(
				locator1 = "IFrame#DIALOG_BOX",
				value1 = "Boolean");

			AssertTextEquals(
				locator1 = "DDMEditStructure#ARE_YOU_SURE_DIALOG_BOX_BODY",
				value1 = "Are you sure you want to delete the selected entries? They will be deleted immediately.");

			AssertClick(
				locator1 = "Button#OK",
				value1 = "OK");

			SelectFrame(value1 = "relative=top");

			DynamicDataMapping.viewCanAddField(field = "Boolean");

			DDLDataDefinition.save();
		}
	}

	@description = "This is a use case for LPS-65479."
	@priority = "4"
	test RemoveRepeatableDateField {
		property test.name.skip.portal.instance = "DynamicdatalistsUsecase#RemoveRepeatableDateField";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP();

		DynamicDataMapping.addField(
			field = "Date",
			fieldFieldLabel = "Date",
			fieldName = "Date");

		DynamicDataMapping.editFieldRepeatable(fieldFieldLabel = "Date");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP();

		DDLDataDefinition.selectCP();

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP();

		DDLRecord.populateFieldDate(
			ddlRecordFieldData = "04/01/2018",
			fieldFieldLabel = "Date",
			fieldName = "Date");

		DDLRecord.addRepeatableField(fieldName = "Date");

		DDLRecord.addRepeatableField(fieldName = "Date");

		DDLRecord.deleteRepeatableField(
			fieldName = "Date",
			fieldNumber = "2");

		DDLRecord.deleteRepeatableField(
			fieldName = "Date",
			fieldNumber = "2");

		DDLRecord.viewFieldRepeatedNotPresent(
			ddlRecordFieldData = "04/01/2018",
			fieldName = "Date");

		PortletEntry.publish();
	}

	@priority = "3"
	test RemoveRepeatableFieldAndAssertOrderInTranslation {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.editFieldRepeatable(fieldFieldLabel = "Text");

		Form.addTranslation(localizedLanguage = "Spanish (Spain)");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "Dynamic Data List");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "Dynamic Data List");

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Content",
			fieldName = "Text");

		DDLRecord.saveAsDraftCP();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.editCP(
			ddlListName = "Dynamic Data List",
			ddlRecordFieldData = "Content, Content 2, Content 3");

		PortletEntry.changeLocale(locale = "es-ES");

		DDLRecord.populateTranslationFieldText(
			ddlRecordFieldData = "Contenido",
			fieldName = "Text");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.editCP(
			ddlListName = "Dynamic Data List",
			ddlRecordFieldData = "Content, Content 2, Content 3");

		DDLRecord.deleteRepeatableField(
			fieldName = "Text",
			fieldNumber = "2");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.editCP(
			ddlListName = "Dynamic Data List",
			ddlRecordFieldData = "Content, Content 3");

		PortletEntry.changeLocale(locale = "es-ES");

		DDLRecord.viewTextFieldRepeated(
			ddlRecordFieldData1 = "Contenido",
			ddlRecordFieldData2 = "Contenido 3");
	}

	@priority = "4"
	test RolesPermissionsDynamicDataLists {
		property custom.properties = "jsonws.web.service.paths.excludes=";

		ApplicationsMenu.gotoPortlet(
			category = "Configuration",
			panel = "Control Panel",
			portlet = "Instance Settings");

		PortalSettings.gotoConfiguration(
			configurationCategory = "User Authentication",
			configurationName = "General",
			configurationScope = "Virtual Instance Scope");

		PortalSettings.uncheckStrangersVerifyEmailCheckbox();

		JSONRole.addSiteRole(
			roleKey = "Data Recorder Name",
			roleTitle = "Data Recorder Name");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "ADD_RECORD",
			resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
			roleTitle = "Data Recorder Name",
			roleType = "site");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "VIEW",
			resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
			roleTitle = "Data Recorder Name",
			roleType = "site");

		JSONRole.addSiteRole(
			roleKey = "Records Manager Name",
			roleTitle = "Records Manager Name");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "UPDATE",
			resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
			roleTitle = "Records Manager Name",
			roleType = "site");

		Permissions.definePermissionViaJSONAPI(
			resourceAction = "VIEW",
			resourceName = "com.liferay.dynamic.data.lists.model.DDLRecordSet",
			roleTitle = "Records Manager Name",
			roleType = "site");

		JSONUser.addUser(
			userEmailAddress = "userea1@liferay.com",
			userFirstName = "userfn1",
			userLastName = "userln1",
			userScreenName = "usersn1");

		JSONUser.setFirstPassword(
			agreeToTermsAndAnswerReminderQuery = "true",
			requireReset = "false",
			userEmailAddress = "userea1@liferay.com");

		JSONGroup.assignUserToGroup(
			groupName = "Guest",
			userEmailAddress = "userea1@liferay.com");

		JSONGroup.assignGroupRoleToUser(
			groupName = "Guest",
			roleTitle = "Data Recorder Name",
			userEmailAddress = "userea1@liferay.com");

		JSONUser.addUser(
			userEmailAddress = "userea2@liferay.com",
			userFirstName = "userfn2",
			userLastName = "userln2",
			userScreenName = "usersn2");

		JSONUser.setFirstPassword(
			agreeToTermsAndAnswerReminderQuery = "true",
			requireReset = "false",
			userEmailAddress = "userea2@liferay.com");

		JSONGroup.assignUserToGroup(
			groupName = "Guest",
			userEmailAddress = "userea2@liferay.com");

		JSONGroup.assignGroupRoleToUser(
			groupName = "Guest",
			roleTitle = "Records Manager Name",
			userEmailAddress = "userea2@liferay.com");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Employee Profile Data Definition");

		DynamicDataMapping.addField(
			field = "Boolean",
			fieldFieldLabel = "Employee",
			fieldName = "Employee");

		DDLDataDefinition.save();

		Navigator.openURL();

		JSONLayout.addPublicLayout(
			groupName = "Guest",
			layoutName = "Dynamic Data Lists Page");

		JSONLayout.updateLayoutTemplateOfPublicLayout(
			groupName = "Guest",
			layoutName = "Dynamic Data Lists Page",
			layoutTemplate = "1 Column");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		Portlet.addPG(portletName = "Dynamic Data Lists Display");

		DDLList.addViaDDLDisplayPG(
			ddlListDescription = "Liferay Employee Profiles",
			ddlListName = "Employees");

		DDLDataDefinition.selectViaDDLDisplayPG(ddlDataDefinitionName = "Employee Profile Data Definition");

		DDLList.saveViaDDLDisplayPG();

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		DDLRecord.addViaDDLDisplayPG(ddlDataDefinitionName = "Employee Profile Data Definition");

		DDLRecord.populateFieldBoolean(
			ddlRecordFieldData = "True",
			fieldFieldLabel = "Employee",
			fieldName = "Employee");

		PortletEntry.publish();

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea1@liferay.com",
			userLoginFullName = "userfn1 userln1");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		var key_ddlDataDefinitionName = "Employee Profile Data Definition";

		AssertElementPresent(locator1 = "DDL#TOOLBAR_ADD");

		AssertElementPresent(locator1 = "DDL#RECORD_TABLE_ELLIPSIS_1");

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea2@liferay.com",
			userLoginFullName = "userfn2 userln2");

		Navigator.gotoPage(pageName = "Dynamic Data Lists Page");

		AssertElementNotPresent(locator1 = "DDL#TOOLBAR_ADD");

		AssertElementPresent(locator1 = "DDL#RECORD_TABLE_ELLIPSIS_1");

		User.logoutAndLoginPG(
			userLoginEmailAddress = "userea1@liferay.com",
			userLoginFullName = "userfn1 userln1");
	}

	@description = "This is a use case for LPS-69667."
	@ignore = "true"
	@priority = "2"
	test SelectLinkToPagePage {
		property portal.upstream = "quarantine";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		for (var pageName : list "P1,P2,P3,P4,P5,P6,P7,P8,P9,P10,P11,P12") {
			PagesAdmin.addPage(pageName = "${pageName}");
		}

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Link To Page Data Definition");

		DynamicDataMapping.addField(
			field = "Link to Page",
			fieldFieldLabel = "Link to Page",
			fieldName = "LinkToPage");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Link To Page Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Link To Page Data Definition",
			ddlListName = "List Name");

		DDLRecord.populateFieldLinkToPage(
			ddlRecordFieldData = "P10",
			fieldName = "LinkToPage",
			pagePrivacy = "Public");

		PortletEntry.publish();

		DDLRecord.viewFirstFieldCP(
			ddlRecordFieldData = "P10",
			fieldFieldLabel = "Link to Page");
	}

	@description = "This is a use case for LPS-48743."
	@priority = "3"
	test TemplateAddDeletedField {
		task ("Create a Data Definition containing a boolean field and a text field") {
			ProductMenu.gotoPortlet(
				category = "Content & Data",
				portlet = "Dynamic Data Lists");

			DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

			DynamicDataMapping.addField(
				field = "Boolean",
				fieldFieldLabel = "Boolean",
				fieldName = "Boolean");

			DynamicDataMapping.addField(
				field = "Text",
				fieldFieldLabel = "Text",
				fieldName = "Text");

			DDLDataDefinition.save();
		}

		task ("Go to Manage Templates of the created Data Definition") {
			ProductMenu.gotoPortlet(
				category = "Content & Data",
				portlet = "Dynamic Data Lists");

			DDLNavigator.gotoManageDataDefinitions();

			var key_ddlDataDefinitionName = "Data Definition";

			Click.waitForMenuToggleJSClick(locator1 = "DDMSelectStructure#DDM_STRUCTURE_ELLIPSIS");

			MenuItem.clickNoError(menuItem = "Manage Templates");

			ClickNoError(
				ariaLabel = "New",
				locator1 = "Button#ANY_WITH_ARIA_LABEL");

			MenuItem.clickNoError(menuItem = "Add Form Template");

			Type.clickAtType(
				locator1 = "TextInput#NAME",
				value1 = "Form Template Name");
		}

		task ("Assert that boolean field and text field can't be added, as they're present") {
			DynamicDataMapping.viewCannotAddField(field = "Boolean");

			DynamicDataMapping.viewCannotAddField(field = "Text");
		}

		task ("Delete the boolean field and assert that it can be added again") {
			MouseOver(
				key_text = "Boolean",
				locator1 = "DDMEditStructure#FORM_FIELD_CONTAINER_TEXT");

			Click.mouseOverClick(locator1 = "DDMEditStructure#FORM_FIELD_DELETE_BUTTON_2");

			AssertTextEquals(
				locator1 = "IFrame#DIALOG_BOX",
				value1 = "Boolean");

			AssertTextEquals(
				locator1 = "DDMEditStructure#ARE_YOU_SURE_DIALOG_BOX_BODY",
				value1 = "Are you sure you want to delete the selected entries? They will be deleted immediately.");

			AssertClick(
				locator1 = "Button#OK",
				value1 = "OK");

			SelectFrame(value1 = "relative=top");

			DynamicDataMapping.viewCanAddField(field = "Boolean");
		}
	}

	@description = "This is a use case for LPS-52865."
	@priority = "4"
	test ViewCannotSaveWithDuplicateFieldNames {
		property test.name.skip.portal.instance = "DynamicdatalistsUsecase#ViewCannotSaveWithDuplicateFieldNames";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "Data Definition Description",
			ddlDataDefinitionName = "Data Definition Name");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.addFieldNested(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.editFieldNestedWithDuplicateName(
			fieldName = "Text",
			fieldNameEdit = "Text2");

		DynamicDataMapping.viewFieldNameNested(fieldNameNested = "Text2");
	}

	@description = "This is a use case for LPS-66228."
	@priority = "4"
	test ViewDisplayTemplateClassLinks {
		property test.name.skip.portal.instance = "DynamicdatalistsUsecase#ViewDisplayTemplateClassLinks";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoManageTemplates(ddlDataDefinitionName = "Contacts");

		LexiconEntry.gotoAddMenuItem(menuItem = "Add Display Template");

		var siteName = TestCase.getSiteName(siteName = "${siteName}");

		for (var fieldName : list "Device,Company,PermissionChecker") {
			var key_fieldName = "${fieldName}";

			if ("${fieldName}" == "PermissionChecker") {
				MouseOver(locator1 = "DDMEditTemplate#SCRIPT_UTIL");
			}
			else {
				MouseOver(locator1 = "DDMEditTemplate#SCRIPT_VARIABLE");
			}

			AssertClick(
				locator1 = "JavaDocs#TOOLTIP_JAVA_CLASS_LINK",
				value1 = "${fieldName}");

			SelectWindow.selectPopUp(locator1 = "null");

			AssertTextEquals(
				locator1 = "JavaDocs#JAVA_CLASS_NAME",
				value1 = "${fieldName}");

			Close.closeAndSelectWindow(locator1 = "title=New Template for Structure: Contacts - ${siteName}");
		}
	}

	@description = "This is a use case for LPS-48913."
	@priority = "3"
	test ViewFieldsNestedInDDLRecord {
		property portal.upstream = "quarantine";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition Name");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.addFieldNested(
			field = "Integer",
			fieldFieldLabel = "Integer",
			fieldName = "Integer");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(
			ddlListDescription = "List Description",
			ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition Name");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition Name",
			ddlListName = "List Name");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text",
			fieldName = "Text");

		DDLRecord.populateFieldInteger(
			ddlRecordFieldData = "123",
			fieldName = "Integer");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords(ddlListName = "List Name");

		LexiconEntry.gotoEntryMenuItem(
			menuItem = "View",
			rowEntry = "Text");

		Click(locator1 = "Button#EDIT");

		AssertTextEquals(
			key_fieldName = "Text",
			locator1 = "TextInput#DDM",
			value1 = "Text");

		AssertTextEquals(
			key_fieldName = "Integer",
			locator1 = "TextInput#DDM",
			value1 = "123");
	}

	@description = "This is a use case for LPS-48591."
	@priority = "3"
	test ViewFormTemplateFieldsAfterBackNavigation {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.addField(
			field = "Text Box",
			fieldFieldLabel = "Text Box",
			fieldName = "TextBox");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLTemplate.addFormTemplateCP(
			ddlDataDefinitionName = "Data Definition",
			ddlFormTemplateName = "Data Definition Form Template Name");

		DynamicDataMapping.viewCannotAddField(field = "Text Box");

		DynamicDataMapping.viewCannotAddField(field = "Text");

		DynamicDataMapping.viewCanAddField(field = "Separator");

		DynamicDataMapping.viewField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.viewField(
			field = "Text Box",
			fieldFieldLabel = "Text Box",
			fieldName = "TextBox");

		DDLTemplate.addFormTemplateViaBackButton(ddlFormTemplateName = "Data Definition Form Template Name");

		DynamicDataMapping.viewCannotAddField(field = "Text Box");

		DynamicDataMapping.viewCannotAddField(field = "Text");

		DynamicDataMapping.viewCanAddField(field = "Separator");

		DynamicDataMapping.viewField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.viewField(
			field = "Text Box",
			fieldFieldLabel = "Text Box",
			fieldName = "TextBox");
	}

	@description = "This is a use case for LPS-67478 ."
	@ignore = "true"
	@priority = "3"
	test ViewLinkToPageBreadcrumb {
		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Parent Page Name");

		PagesAdmin.addChildPage(
			childPageName = "Child Page Name",
			parentPageName = "Parent Page Name");

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Link to Page",
			fieldFieldLabel = "Link to Page",
			fieldName = "LinkToPage");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.viewCP(
			ddlDataDefinitionName = "Data Definition",
			fieldFieldLabel = "Link to Page");

		DynamicDataMapping.viewField(
			field = "Link to Page",
			fieldFieldLabel = "Link to Page",
			fieldName = "LinkToPage");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "List Name");

		DDLRecord.populateFieldLinkToPage(
			ddlRecordFieldData = "Child Page Name",
			fieldName = "LinkToPage",
			pagePrivacy = "Public",
			parentPage = "Parent Page Name");

		DDLRecord.gotoLinkToPageSelect(fieldName = "LinkToPage");

		DDLRecord.viewLinkToPageBreadcrumbCount(count = "2");

		DDLRecord.gotoLinkToPageNavItem(pagePrivacy = "Private");

		DDLRecord.gotoLinkToPageNavItem(pagePrivacy = "Public");

		DDLRecord.gotoLinkToPageChildPages(parentPage = "Parent Page Name");

		DDLRecord.selectLinkToPageRadio(ddlRecordFieldData = "Child Page Name");

		DDLRecord.viewLinkToPageBreadcrumbCount(count = "2");
	}

	@description = "This is a use case for LPS-57993"
	@priority = "3"
	test ViewMultipleDDLRecordsInAssetPublisherAndSortByModifiedDate {
		ProductMenu.gotoPortlet(
			category = "Site Builder",
			portlet = "Pages");

		PagesAdmin.addPage(pageName = "Asset Publisher Page");

		Navigator.gotoPage(pageName = "Asset Publisher Page");

		Portlet.addPG(portletName = "Asset Publisher");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP();

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text Label",
			fieldName = "TextName");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP();

		DDLDataDefinition.selectCP();

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords();

		for (var ddlRecordFieldData : list "firstRecord,secondText,thirdTest") {
			DDLNavigator.gotoAddListRecord();

			DDLRecord.populateFieldText(
				ddlRecordFieldData = "${ddlRecordFieldData}",
				fieldFieldLabel = "${fieldFieldLabel}",
				fieldName = "TextName");

			PortletEntry.publish();
		}

		Navigator.gotoPage(pageName = "Asset Publisher Page");

		AssetPublisherPortlet.viewMultipleDDLRecordsViaAP(
			ddlRecordFieldData1 = "thirdTest",
			ddlRecordFieldData2 = "secondText",
			ddlRecordFieldData3 = "firstRecord");

		AssetPublisherPortlet.configureSelectedPG(selectedAsset = "Dynamic Data Lists Record");

		Navigator.gotoPage(pageName = "Asset Publisher Page");

		AssetPublisherPortlet.configureAssetDisplayOrderPG(
			fieldNameOrder = "Modified Date",
			sortOrder = "Ascending");

		Navigator.gotoPage(pageName = "Asset Publisher Page");

		AssetPublisherPortlet.viewMultipleDDLRecordsViaAP(
			ddlRecordFieldData1 = "firstRecord",
			ddlRecordFieldData2 = "secondText",
			ddlRecordFieldData3 = "thirdTest");
	}

	@description = "This is a use case for LPS-51538."
	@priority = "3"
	test ViewNestedFieldDoesNotDisplayInRecordTable {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "Data Definition Description",
			ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.addFieldNested(
			field = "Integer",
			fieldFieldLabel = "Integer",
			fieldName = "Integer");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "Dynamic Data List");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "Dynamic Data List");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Test Data",
			fieldName = "Text");

		DDLRecord.populateFieldInteger(
			ddlRecordFieldData = "253",
			fieldName = "Integer");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords(ddlListName = "Dynamic Data List");

		LexiconEntry.gotoEntryMenuItem(
			menuItem = "View",
			rowEntry = "Test Data");

		Click(locator1 = "Button#EDIT");

		AssertTextEquals(
			key_fieldName = "Text",
			locator1 = "TextInput#DDM",
			value1 = "Test Data");

		AssertTextEquals(
			key_fieldName = "Integer",
			locator1 = "TextInput#DDM",
			value1 = "253");
	}

	@description = "This is a use case for LPS-48969."
	@priority = "3"
	test ViewNestedFieldEntryWithBlankParentField {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(
			ddlDataDefinitionDescription = "Data Definition Description",
			ddlDataDefinitionName = "Data Definition");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.addFieldNested(
			field = "Integer",
			fieldFieldLabel = "Integer",
			fieldName = "Integer");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(ddlListName = "Dynamic Data List");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition",
			ddlListName = "Dynamic Data List");

		DDLRecord.populateFieldInteger(
			ddlRecordFieldData = "253",
			fieldName = "Integer");

		PortletEntry.publish();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLNavigator.gotoListRecords(ddlListName = "Dynamic Data List");

		LexiconEntry.gotoEntryMenuItem(
			menuItem = "View",
			rowEntry = "");

		Click(locator1 = "Button#EDIT");

		AssertTextEquals(
			key_fieldName = "Text",
			locator1 = "TextInput#DDM",
			value1 = "");

		AssertTextEquals(
			key_fieldName = "Integer",
			locator1 = "TextInput#DDM",
			value1 = "253");
	}

	@description = "This is a use case for LPS-63290 and LPS-72216."
	@priority = "4"
	test ViewRepeatableNestedFields {
		property test.name.skip.portal.instance = "DynamicdatalistsUsecase#ViewRepeatableNestedFields";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition Name");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.editFieldRepeatable(fieldFieldLabel = "Text");

		DynamicDataMapping.addFieldNested(
			field = "Documents and Media",
			fieldFieldLabel = "Documents and Media",
			fieldName = "DocumentsAndMedia");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(
			ddlListDescription = "List Description",
			ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition Name");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition Name",
			ddlListName = "List Name");

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.viewNestedFieldsRepeating(
			nestedChildFieldFieldName = "DocumentsAndMedia",
			nestedParentFieldFieldName = "Text");

		DDLRecord.deleteRepeatableField(
			fieldName = "Text",
			fieldNumber = "2");

		AssertElementNotPresent(
			key_fieldName = "Text",
			key_fieldNumber = "2",
			locator1 = "DDLEditRecord#FIELD_DELETE");
	}

	@description = "This is a use case for LPS-60155."
	@priority = "5"
	test ViewRequiredNestedDocumentsAndMediaField {
		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP(ddlDataDefinitionName = "Data Definition Name");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text",
			fieldName = "Text");

		DynamicDataMapping.editFieldRepeatable(fieldFieldLabel = "Text");

		DynamicDataMapping.editFieldRequired(fieldFieldLabel = "Text");

		DynamicDataMapping.addFieldNested(
			field = "Documents and Media",
			fieldFieldLabel = "Documents and Media",
			fieldName = "DocumentsAndMedia");

		DynamicDataMapping.editFieldRequired(fieldFieldLabel = "Documents and Media");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLList.addCP(
			ddlListDescription = "List Description",
			ddlListName = "List Name");

		DDLDataDefinition.selectCP(ddlDataDefinitionName = "Data Definition Name");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLRecord.addCP(
			ddlDataDefinitionName = "Data Definition Name",
			ddlListName = "List Name");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text",
			fieldName = "Text");

		DDLRecord.populateFieldDocumentsAndMediaChooseFromDocumentLibrary(
			document = "Document_1.txt",
			fieldName = "DocumentsAndMedia");

		DDLRecord.addRepeatableField(fieldName = "Text");

		DDLRecord.populateFieldText(
			ddlRecordFieldData = "Text",
			fieldName = "Text");

		Button.clickPublish();

		Alert.viewRequiredField();

		DDLRecord.populateFieldDocumentsAndMediaChooseFromDocumentLibrary(
			document = "Document_1.txt",
			fieldName = "DocumentsAndMedia",
			parentFieldName = "Text");

		PortletEntry.publish();
	}

	@description = "This is a use case for LPS-51684."
	@priority = "4"
	test ViewUniqueFieldLabels {
		property test.name.skip.portal.instance = "DynamicdatalistsUsecase#ViewUniqueFieldLabels";

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.addCP();

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text1",
			fieldName = "Text1");

		DynamicDataMapping.addField(
			field = "Text",
			fieldFieldLabel = "Text2",
			fieldName = "Text2");

		DDLDataDefinition.save();

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.viewCP(fieldFieldLabel = "Text1");

		Navigator.openURL();

		ProductMenu.gotoPortlet(
			category = "Content & Data",
			portlet = "Dynamic Data Lists");

		DDLDataDefinition.viewCP(fieldFieldLabel = "Text2");
	}

}