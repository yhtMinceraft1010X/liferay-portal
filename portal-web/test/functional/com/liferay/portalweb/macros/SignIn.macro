definition {

	var userEmailAddress = "test@liferay.com";
	var userPassword = "test";
	var userPasswordReminderAnswer = "test";

	macro _signIn {
		if (isSet(virtualHostsURL)) {
			Navigator.openSpecificURL(url = "${virtualHostsUrl}/web/guest?SM_USER=${userEmailAddress}");
		}
		else {
			var baseUrl = PropsUtil.get("portal.url");

			Navigator.openSpecificURL(url = "${baseUrl}/web/guest?SM_USER=${userEmailAddress}");
		}

		AssertElementPresent(locator1 = "UserBar#USER_AVATAR_IMAGE");

		WaitForLiferayEvent.initializeLiferayEventLog();
	}

	@summary = "Agree to Liferay Portal Terms of Use"
	macro agreeToTermsOfUse {
		AssertClick(
			locator1 = "Button#I_AGREE",
			value1 = "I Agree");

		AssertElementNotPresent(locator1 = "Button#I_AGREE");
	}

	@summary = "Enter '${userPasswordReminderAnswer}' as password reminder"
	macro setPasswordReminder {
		Type(
			locator1 = "TextInput#ANSWER",
			value1 = "${userPasswordReminderAnswer}");

		Button.clickSave();
	}

	@summary = "Sign in to Liferay Portal as '${userEmailAddress}' using the password '${userPassword}'"
	macro signIn {
		SignIn._signIn(
			userEmailAddress = "${userEmailAddress}",
			userPassword = "${userPassword}");
	}

	macro signInPortalInstanceSetUp {
		var portalUrl = PropsUtil.get("portal.url");
		var portalUrl = StringUtil.replace("${portalUrl}", "http://", "");
		var portalUrl = StringUtil.replace("${portalUrl}", ":8080", "");

		HeadlessPortalInstanceAPI.addPortalInstance(
			authenticationMethod = "${authenticationMethod}",
			domain = "liferay.com",
			portalInstanceId = "${portalUrl}",
			virtualHost = "${portalUrl}");
	}

	macro signInSpecificURL {
		SignIn._signIn(
			userEmailAddress = "${userEmailAddress}",
			userPassword = "${userPassword}",
			virtualHostsUrl = "${url}");
	}

	@summary = "Sign in to Liferay Portal as '${userEmailAddress}' using the password '${userPassword}'"
	macro signInTestSetup {
		JSONUser.agreeToTermsAndAnswerReminderQuery(userEmailAddress = "test@liferay.com");

		SignIn._signIn(
			userEmailAddress = "${userEmailAddress}",
			userPassword = "${userPassword}");
	}

}